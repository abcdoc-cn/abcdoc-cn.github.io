<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>设计模式 | Hexo</title>
  <meta name="description" content="[TOC]   创建型模式，共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。 结构型模式，共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。 行为型模式，共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。  创建型模式关注怎样创建对象用于描述怎样创建对象，主要">
<meta property="og:type" content="article">
<meta property="og:title" content="设计模式">
<meta property="og:url" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index.html">
<meta property="og:site_name" content="天空">
<meta property="og:description" content="[TOC]   创建型模式，共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。 结构型模式，共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。 行为型模式，共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。  创建型模式关注怎样创建对象用于描述怎样创建对象，主要">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://doc.cloudcollect.cc/upload/2021/04/image-08e7b6a919ec4b808374ec7263314188.png">
<meta property="og:image" content="http://doc.cloudcollect.cc/upload/2021/04/image-ac6d045a5dff4d35bccbb5ee647056b1.png">
<meta property="og:image" content="http://doc.cloudcollect.cc/upload/2021/04/image-922d751f73674490905256eb6cdcc9df.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/c28481f9-2999-4edd-a99b-afb10a3d0360.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/44ee3844-8f6b-4e33-9ef4-7978b90f83e1.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/5709c5ba-5af1-4193-9fab-de76b37122dc.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/c28481f9-2999-4edd-a99b-afb10a3d0360.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/a7612448-e8a0-4fbf-b8d3-098178b4ee08.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/bf41771a-0df1-4659-9251-2881054df580.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/df91e55e-3457-4eac-8a82-fb329fea2265.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/4ad1e38a-17a7-468b-9ca0-f0077ba475a1.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/f751cedd-2e20-4adc-9149-d4f38eb277df.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/df91e55e-3457-4eac-8a82-fb329fea2265.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/1db8517a-af91-4f96-b913-afa6e06fe3ce.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/f5fa9f5d-858b-4fb7-9166-32630362336f.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/e1ee8b0a-0a19-4f95-8b53-20ead9fac507.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/085cbffc-d205-4715-a125-67d6a6d2f17f.png">
<meta property="og:image" content="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/images/79faf93d-2624-45d7-8788-e48e33bad712.png">
<meta property="article:published_time" content="2021-04-25T06:16:42.115Z">
<meta property="article:modified_time" content="2021-04-25T06:31:20.384Z">
<meta property="article:tag" content="设计模式">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://doc.cloudcollect.cc/upload/2021/04/image-08e7b6a919ec4b808374ec7263314188.png">
  <!-- Canonical links -->
  <link rel="canonical" href="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index.html">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="天空" type="application/atom+xml">
</head>


<body class="main-center" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav menu-highlight">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/abcdoc-cn" target="_blank" title="Github" ><i class="icon icon-github"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/C/" style="font-size: 13.29px;">C</a> <a href="/tags/C/" style="font-size: 13.29px;">C++</a> <a href="/tags/CentOS/" style="font-size: 13.29px;">CentOS</a> <a href="/tags/Docker/" style="font-size: 13px;">Docker</a> <a href="/tags/Electron/" style="font-size: 13px;">Electron</a> <a href="/tags/Git/" style="font-size: 13px;">Git</a> <a href="/tags/HAProxy/" style="font-size: 13px;">HAProxy</a> <a href="/tags/Hexo/" style="font-size: 13px;">Hexo</a> <a href="/tags/Java/" style="font-size: 13.57px;">Java</a> <a href="/tags/Jenkins/" style="font-size: 13px;">Jenkins</a> <a href="/tags/Linux/" style="font-size: 13.29px;">Linux</a> <a href="/tags/Maven/" style="font-size: 13px;">Maven</a> <a href="/tags/MySQL/" style="font-size: 13.71px;">MySQL</a> <a href="/tags/NTP/" style="font-size: 13px;">NTP</a> <a href="/tags/Oracle/" style="font-size: 13.29px;">Oracle</a> <a href="/tags/SQLite/" style="font-size: 13px;">SQLite</a> <a href="/tags/STL/" style="font-size: 13px;">STL</a> <a href="/tags/SpringBoot/" style="font-size: 13.14px;">SpringBoot</a> <a href="/tags/TCP-IP/" style="font-size: 13.43px;">TCP/IP</a> <a href="/tags/Typora/" style="font-size: 13px;">Typora</a> <a href="/tags/VS2015/" style="font-size: 13.43px;">VS2015</a> <a href="/tags/VUE/" style="font-size: 13px;">VUE</a> <a href="/tags/Vditor/" style="font-size: 13px;">Vditor</a> <a href="/tags/nodejs/" style="font-size: 13.14px;">nodejs</a> <a href="/tags/openssl/" style="font-size: 13px;">openssl</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 13.29px;">多线程</a> <a href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size: 13.29px;">开发工具</a> <a href="/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" style="font-size: 13.57px;">异常处理</a> <a href="/tags/%E6%89%B9%E5%A4%84%E7%90%86/" style="font-size: 13.14px;">批处理</a> <a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 13.14px;">测试</a> <a href="/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" style="font-size: 13.57px;">环境搭建</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 13.29px;">算法</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" style="font-size: 13.14px;">计算机组成原理</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 13.86px;">计算机网络</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 13px;">设计模式</a> <a href="/tags/%E9%80%9F%E6%9F%A5/" style="font-size: 14px;">速查</a> <a href="/tags/%E9%AB%98%E5%8F%AF%E7%94%A8/" style="font-size: 13px;">高可用</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CentOS/">CentOS</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Electron/">Electron</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/GIt/">GIt</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Maven/">Maven</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nodejs/">Nodejs</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Oracle/">Oracle</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringBoot/">SpringBoot</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VS2015/">VS2015</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VUE/">VUE</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8B%E8%AF%95/">测试</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a><span class="category-list-count">3</span></li></ul>
    </div>
  </div>


    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-设计模式/设计模式" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      设计模式
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="article-date">
	  <time datetime="2021-04-25T06:16:42.115Z" itemprop="datePublished">2021-04-25</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/#comments" class="article-comment-link">评论</a></span>
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <p>[TOC]</p>
<p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-08e7b6a919ec4b808374ec7263314188.png" alt="设计模式间的关系"></p>
<ul>
<li><strong>创建型模式</strong>，共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。</li>
<li><strong>结构型模式</strong>，共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。</li>
<li><strong>行为型模式</strong>，共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。</li>
</ul>
<h2 id="创建型模式"><a href="#创建型模式" class="headerlink" title="创建型模式"></a>创建型模式</h2><p><strong>关注怎样创建对象</strong><br>用于描述<strong>怎样创建对象</strong>，主要特点是<strong>将对象的创建与使用分离</strong>。<br><strong>提供一种在创建对象的同时隐藏创建逻辑的方式</strong>，而不是使用 new 运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活。</p>
<p>在所有的工厂模式中： <strong>两个类 A 和 B 之间的关系应该仅仅是 A 创建 B 或者 A 使用 B，不能两种关系都有</strong></p>
<p>将对象的创建和使用分离，是的系统更加符合<strong>单一职责原则</strong>。</p>
<h3 id="简单工厂模式（Simple-Factory）"><a href="#简单工厂模式（Simple-Factory）" class="headerlink" title="简单工厂模式（Simple Factory）"></a>简单工厂模式（Simple Factory）</h3><p><strong>不属于 23 个经典设计模式</strong>，是其他工厂模式的基础</p>
<p>客户端需要什么，只需传入一个正确的参数，就可以获取你所需要的对象，无须知道创建细节。</p>
<blockquote>
<p>对象相关的职责有三类： </p>
<ul>
<li>对象本身具有的职责<ul>
<li>对象本身所具有的一些数据和行为，可以通过一些公开的方法实现它的职责</li>
</ul>
</li>
<li>创建对象的职责</li>
<li>使用对象的职责</li>
</ul>
</blockquote>
<blockquote>
<p>创建对象的几种方法：</p>
<ul>
<li>使用 new 关键字</li>
<li>通过反射机制创建</li>
<li>通过 clone() 方法创建</li>
<li>通过工厂类创建</li>
</ul>
</blockquote>
<h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p>定义一个工厂类，它可以根据参数的不同返回不同的实例，被创建的实例通常都具有共同的父类。因为创建的实例方法都是静态方法，因此简单工厂模式又被称为静态工厂方法模式。</p>
<h4 id="结构图"><a href="#结构图" class="headerlink" title="结构图"></a>结构图</h4><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-ac6d045a5dff4d35bccbb5ee647056b1.png" alt="image.png"></p>
<ul>
<li>Factory（工厂角色）： 简单工厂模式的核心，<ul>
<li>负责实现所有产品实例的内部逻辑</li>
<li>可以被外界直接调用，创建所需的产品对象</li>
<li>提供静态的工厂方法 factoryMethod()，返回类型是抽象产品类型（Product）</li>
</ul>
</li>
<li>Product（抽象产品角色）： 工厂类创建的所有对象的父类<ul>
<li>封装各种产品对象的公有方法，它的引入提高系统灵活性，使工厂类中只需定义一个通用的工厂方法，因为所有创建的具体产品对象都是其子类对象。</li>
</ul>
</li>
<li>ConcreteProduct（具体产品角色）： 简单工厂模式的创建目标，<ul>
<li>所有被创建的对象都充当了这个角色的某个具体类的实例</li>
<li>每个具体产品角色都继承了抽象产品角色，需要实现在抽象产品中声明的抽象方法</li>
</ul>
</li>
<li>客户端： 客户端通过工厂类创建一个产品类的实例，无需直接使用 new 类创建对象 </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 抽象产品类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="comment">//所有产品类的公共业务方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">methodSame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//公共方法的实现</span></span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//声明抽象业务方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">methodDiff</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 具体产品类 A</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProductA</span> <span class="keyword">extends</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="comment">//实现业务方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">methodDiff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//业务方法的实现</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 具体产品类 B</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProductB</span> <span class="keyword">extends</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="comment">//实现业务方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">methodDiff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//业务方法的实现</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 工厂类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="comment">//静态工厂方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Product <span class="title">getProduct</span><span class="params">(String arg)</span> </span>&#123;</span><br><span class="line">		Product product = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">if</span> (arg.equalsIgnoreCase(<span class="string">&quot;A&quot;</span>)) &#123;</span><br><span class="line">			product = <span class="keyword">new</span> ConcreteProductA();</span><br><span class="line">            <span class="comment">//初始化设置product</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (arg.equalsIgnoreCase(<span class="string">&quot;B&quot;</span>)) &#123;</span><br><span class="line">			product = <span class="keyword">new</span> ConcreteProductB();</span><br><span class="line">            <span class="comment">//初始化设置product</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> product;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 客户端</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		Product product; </span><br><span class="line">		product = Factory.getProduct(<span class="string">&quot;A&quot;</span>); <span class="comment">//通过工厂类创建产品对象</span></span><br><span class="line">		product.methodSame();</span><br><span class="line">		product.methodDiff();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-922d751f73674490905256eb6cdcc9df.png" alt="image.png"></p>
<ul>
<li>抽象产品类： Chart 接口</li>
<li>具体产品类： HistogramChart、 PieChart、 LineChart</li>
<li>工厂类： ChartFactory</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//抽象图表接口：抽象产品类</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Chart</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//柱状图类：具体产品类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HistogramChart</span> <span class="keyword">implements</span> <span class="title">Chart</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">HistogramChart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;创建柱状图！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;显示柱状图！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//饼状图类：具体产品类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PieChart</span> <span class="keyword">implements</span> <span class="title">Chart</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">PieChart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;创建饼状图！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;显示饼状图！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//折线图类：具体产品类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LineChart</span> <span class="keyword">implements</span> <span class="title">Chart</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">LineChart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;创建折线图！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;显示折线图！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//图表工厂类：工厂类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChartFactory</span> </span>&#123;</span><br><span class="line">    <span class="comment">//静态工厂方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Chart <span class="title">getChart</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">		Chart chart = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">if</span> (type.equalsIgnoreCase(<span class="string">&quot;histogram&quot;</span>)) &#123;</span><br><span class="line">			chart = <span class="keyword">new</span> HistogramChart();</span><br><span class="line">			System.out.println(<span class="string">&quot;初始化设置柱状图！&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (type.equalsIgnoreCase(<span class="string">&quot;pie&quot;</span>)) &#123;</span><br><span class="line">			chart = <span class="keyword">new</span> PieChart();</span><br><span class="line">			System.out.println(<span class="string">&quot;初始化设置饼状图！&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (type.equalsIgnoreCase(<span class="string">&quot;line&quot;</span>)) &#123;</span><br><span class="line">			chart = <span class="keyword">new</span> LineChart();</span><br><span class="line">			System.out.println(<span class="string">&quot;初始化设置折线图！&quot;</span>);			</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> chart;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 客户端</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		Chart chart;</span><br><span class="line">		chart = ChartFactory.getChart(<span class="string">&quot;histogram&quot;</span>); <span class="comment">//通过静态工厂方法创建产品</span></span><br><span class="line">		chart.display();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="实例改进"><a href="#实例改进" class="headerlink" title="实例改进"></a>实例改进</h4><p>引入 config.xml ，在配置文件中定义 chartType</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">config</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">chartType</span>&gt;</span>histogram<span class="tag">&lt;/<span class="name">chartType</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.xml.parsers.*;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.*;</span><br><span class="line"><span class="keyword">import</span> org.xml.sax.SAXException;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XMLUtil</span> </span>&#123;</span><br><span class="line">    <span class="comment">//该方法用于从XML配置文件中提取图表类型，并返回类型名</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getChartType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">//创建文档对象</span></span><br><span class="line">			DocumentBuilderFactory dFactory = DocumentBuilderFactory.newInstance();</span><br><span class="line">			DocumentBuilder builder = dFactory.newDocumentBuilder();</span><br><span class="line">			Document doc;							</span><br><span class="line">			doc = builder.parse(<span class="keyword">new</span> File(<span class="string">&quot;config.xml&quot;</span>)); </span><br><span class="line">		</span><br><span class="line">			<span class="comment">//获取包含图表类型的文本节点</span></span><br><span class="line">			NodeList nl = doc.getElementsByTagName(<span class="string">&quot;chartType&quot;</span>);</span><br><span class="line">            Node classNode = nl.item(<span class="number">0</span>).getFirstChild();</span><br><span class="line">            String chartType = classNode.getNodeValue().trim();</span><br><span class="line">            <span class="keyword">return</span> chartType;</span><br><span class="line">        &#125;   </span><br><span class="line">       	<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">           	e.printStackTrace();</span><br><span class="line">        	<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		Chart chart;</span><br><span class="line">		String type = XMLUtil.getChartType(); <span class="comment">//读取配置文件中的参数</span></span><br><span class="line">		chart = ChartFactory.getChart(type); <span class="comment">//创建产品对象</span></span><br><span class="line">		chart.display();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ol>
<li>实现了对象创建和使用的分离，客户端只消费产品，不需要创建</li>
<li>客户端不需要知道创建产品类的类名，只需知道产品类对应的参数</li>
<li>通过引入配置文件，可以在不修改客户端的情况下更换或增加新的具体产品类</li>
</ol>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ol>
<li>工厂类集中了所有产品的创建逻辑，职责过重，一旦不能正常工作，整个系统受影响</li>
<li>会增加系统中类的个数</li>
<li>扩展困难，一旦添加新产品就要修改工厂逻辑，可能造成工厂逻辑过于复杂</li>
<li>使用了静态工厂方法，工厂类无法形成基于继承的等级结构</li>
</ol>
<h4 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h4><ol>
<li>工厂类负责创建的对象较少</li>
<li>客户端只知道传入工厂类的参数，对如何创建对象不关心</li>
</ol>
<h3 id="工厂模式（Factory）"><a href="#工厂模式（Factory）" class="headerlink" title="工厂模式（Factory）"></a>工厂模式（Factory）</h3><p>创建对象时不会对客户端暴露创建逻辑，并且通过使用一个共同的接口来指向新创建的对象。</p>
<h4 id="意图"><a href="#意图" class="headerlink" title="意图"></a>意图</h4><p>定义一个创建对象的接口，让子类自己决定实例化哪一个工厂类，使创建过程延迟到子类进行。</p>
<h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><p>明确的计划不同条件创建不同实例</p>
<h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h4><p><img src="images/c28481f9-2999-4edd-a99b-afb10a3d0360.png" alt="工厂模式类图"></p>
<h3 id="抽象工厂模式（Abstract-Factory）"><a href="#抽象工厂模式（Abstract-Factory）" class="headerlink" title="抽象工厂模式（Abstract Factory）"></a>抽象工厂模式（Abstract Factory）</h3><h4 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h4><p><img src="images/44ee3844-8f6b-4e33-9ef4-7978b90f83e1.png" alt="抽象工厂类图"></p>
<h3 id="单例模式（Singleton）"><a href="#单例模式（Singleton）" class="headerlink" title="单例模式（Singleton）"></a>单例模式（Singleton）</h3><h4 id="意图-1"><a href="#意图-1" class="headerlink" title="意图"></a>意图</h4><p>保证一个类仅有一个实例，并提供一个访问它的全局访问点。</p>
<h4 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h4><p>一个全局使用的类频繁创建与销毁。</p>
<h4 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h4><ol>
<li>内存里只有一个实例，减少了内存开销</li>
<li>避免对资源的多重占用（比如写文件操作）</li>
</ol>
<h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><p>没有接口，不能继承，<br>与单一职责原则冲突，一个类应该只关心内部逻辑，而不关心外面怎么样来实例化</p>
<h4 id="实现-2"><a href="#实现-2" class="headerlink" title="实现"></a>实现</h4><p><img src="images/5709c5ba-5af1-4193-9fab-de76b37122dc.png" alt="单例模式类图"></p>
<h4 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h4><h5 id="懒汉式，线程不安全（不建议）"><a href="#懒汉式，线程不安全（不建议）" class="headerlink" title="懒汉式，线程不安全（不建议）"></a>懒汉式，线程不安全（不建议）</h5><ul>
<li><strong>是否 Lazy 初始化</strong>：是</li>
<li><strong>是否多线程安全</strong>：否</li>
<li><strong>实现难度</strong>：易</li>
</ul>
<h5 id="懒汉式，线程安全（不建议）"><a href="#懒汉式，线程安全（不建议）" class="headerlink" title="懒汉式，线程安全（不建议）"></a>懒汉式，线程安全（不建议）</h5><ul>
<li><strong>是否 Lazy 初始化</strong>：是</li>
<li><strong>是否多线程安全</strong>：是</li>
<li><strong>实现难度</strong>：易</li>
</ul>
<h5 id="饿汉式（建议）"><a href="#饿汉式（建议）" class="headerlink" title="饿汉式（建议）"></a>饿汉式（建议）</h5><p>基于 classloader 机制避免了多线程的同步问题，</p>
<ul>
<li><strong>是否 Lazy 初始化</strong>：否</li>
<li><strong>是否多线程安全</strong>：是</li>
<li><strong>实现难度</strong>：易</li>
<li><strong>优点</strong>： 没有加锁，执行效率会提高</li>
<li><strong>缺点</strong>： 类加载时就初始化，浪费内存，容易产生垃圾</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="双重校验锁（特殊需求使用）"><a href="#双重校验锁（特殊需求使用）" class="headerlink" title="双重校验锁（特殊需求使用）"></a>双重校验锁（特殊需求使用）</h5><ul>
<li><strong>是否 Lazy 初始化</strong>：是</li>
<li><strong>是否多线程安全</strong>：是</li>
<li><strong>实现难度</strong>：较复杂</li>
<li><strong>优点</strong>： 安全且多线程时高效</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton singleton;  </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;&#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getSingleton</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">		<span class="keyword">if</span> (singleton == <span class="keyword">null</span>) &#123;  </span><br><span class="line">			<span class="keyword">synchronized</span> (Singleton.class) &#123;  </span><br><span class="line">				<span class="keyword">if</span> (singleton == <span class="keyword">null</span>) &#123;  </span><br><span class="line">					singleton = <span class="keyword">new</span> Singleton();  </span><br><span class="line">				&#125;  </span><br><span class="line">			&#125;  </span><br><span class="line">		&#125;  </span><br><span class="line">		<span class="keyword">return</span> singleton;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="静态内部类（明确需要-lazy-loading-时使用）"><a href="#静态内部类（明确需要-lazy-loading-时使用）" class="headerlink" title="静态内部类（明确需要 lazy loading 时使用）"></a>静态内部类（明确需要 lazy loading 时使用）</h5><p>利用 classloader 机制来保证初始化 instance 时只有一个线程，<br>与 饿汉式不同的是： </p>
<ul>
<li>饿汉式只要类被加载，就会是实例化，</li>
<li>这种方式类被加载，不一定被实例化，只有通过显式调用 getInstance，才会装载 SingletonHolder，从而实例化 instance。</li>
</ul>
<p>适用于静态域情况，双重校验方式可在实例域需要延迟初始化时使用</p>
<ul>
<li><strong>是否 Lazy 初始化</strong>：是</li>
<li><strong>是否多线程安全</strong>：是</li>
<li><strong>实现难度</strong>：一般<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;&#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">		<span class="keyword">return</span> SingletonHolder.INSTANCE;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="枚举（涉及反序列化创建对象使用）"><a href="#枚举（涉及反序列化创建对象使用）" class="headerlink" title="枚举（涉及反序列化创建对象使用）"></a>枚举（涉及反序列化创建对象使用）</h5><ul>
<li><strong>是否 Lazy 初始化</strong>：否</li>
<li><strong>是否多线程安全</strong>：是</li>
<li><strong>实现难度</strong>：易</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Singleton</span> </span>&#123;  </span><br><span class="line">    INSTANCE;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whateverMethod</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="建造者模式（Builder）"><a href="#建造者模式（Builder）" class="headerlink" title="建造者模式（Builder）"></a>建造者模式（Builder）</h3><h3 id="原型模式（Prototype）"><a href="#原型模式（Prototype）" class="headerlink" title="原型模式（Prototype）"></a>原型模式（Prototype）</h3><h2 id="结构型模式"><a href="#结构型模式" class="headerlink" title="结构型模式"></a>结构型模式</h2><p><strong>关注类和对象的组合</strong><br>用于描述如何<strong>将类或对象按某种布局组成更大的结构</strong><br>继承的概念被用来组合接口和定义组合对象获得新功能的方法。</p>
<h3 id="适配器模式（Adapter）"><a href="#适配器模式（Adapter）" class="headerlink" title="适配器模式（Adapter）"></a>适配器模式（Adapter）</h3><h3 id="桥接模式（Bridge）"><a href="#桥接模式（Bridge）" class="headerlink" title="桥接模式（Bridge）"></a>桥接模式（Bridge）</h3><h4 id="意图-2"><a href="#意图-2" class="headerlink" title="意图"></a>意图</h4><p>将抽象部分与实现部分分离，使两者可以独立变化</p>
<h4 id="解决问题-1"><a href="#解决问题-1" class="headerlink" title="解决问题"></a>解决问题</h4><p>有多种可能会变化的情况下，用继承会造成类爆炸问题，扩展不灵活</p>
<h4 id="缺点-2"><a href="#缺点-2" class="headerlink" title="缺点"></a>缺点</h4><p>增加系统理解与设计难度</p>
<h4 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h4><p><img src="images/c28481f9-2999-4edd-a99b-afb10a3d0360.png" alt="桥接模式类图"></p>
<h3 id="过滤器模式（Filter、Criteria-Pattern）"><a href="#过滤器模式（Filter、Criteria-Pattern）" class="headerlink" title="过滤器模式（Filter、Criteria Pattern）"></a>过滤器模式（Filter、Criteria Pattern）</h3><p>允许使用不同标准来过滤一组对象，通过逻辑运算以解耦的方式把它们连接起来。<br>结合多个标准来获得单一标准。</p>
<h4 id="类图-1"><a href="#类图-1" class="headerlink" title="类图"></a>类图</h4><p><img src="images/a7612448-e8a0-4fbf-b8d3-098178b4ee08.png" alt="过滤器模式类图"></p>
<h3 id="组合模式（Composite）"><a href="#组合模式（Composite）" class="headerlink" title="组合模式（Composite）"></a>组合模式（Composite）</h3><h3 id="装饰器模式（Decorator）"><a href="#装饰器模式（Decorator）" class="headerlink" title="装饰器模式（Decorator）"></a>装饰器模式（Decorator）</h3><h3 id="外观模式（Facade）"><a href="#外观模式（Facade）" class="headerlink" title="外观模式（Facade）"></a>外观模式（Facade）</h3><h3 id="享元模式（Flyweight）"><a href="#享元模式（Flyweight）" class="headerlink" title="享元模式（Flyweight）"></a>享元模式（Flyweight）</h3><h3 id="代理模式（Proxy）"><a href="#代理模式（Proxy）" class="headerlink" title="代理模式（Proxy）"></a>代理模式（Proxy）</h3><h2 id="行为型模式"><a href="#行为型模式" class="headerlink" title="行为型模式"></a>行为型模式</h2><p><strong>关注对象间的通信</strong><br>用于描述类或对象间怎样相互协作共同完成单个对象无法单独完成的任务，以及怎样分配职责。</p>
<h3 id="责任链模式（Chain-of-Responsibility）"><a href="#责任链模式（Chain-of-Responsibility）" class="headerlink" title="责任链模式（Chain of Responsibility）"></a>责任链模式（Chain of Responsibility）</h3><h4 id="类图-2"><a href="#类图-2" class="headerlink" title="类图"></a>类图</h4><p><img src="images/bf41771a-0df1-4659-9251-2881054df580.png" alt="责任链模式类图"></p>
<h3 id="命令模式（Command）"><a href="#命令模式（Command）" class="headerlink" title="命令模式（Command）"></a>命令模式（Command）</h3><h3 id="解释器模式（Interpreter）"><a href="#解释器模式（Interpreter）" class="headerlink" title="解释器模式（Interpreter）"></a>解释器模式（Interpreter）</h3><h3 id="迭代子模式（Iterator）"><a href="#迭代子模式（Iterator）" class="headerlink" title="迭代子模式（Iterator）"></a>迭代子模式（Iterator）</h3><h3 id="中介者模式（Mediator）"><a href="#中介者模式（Mediator）" class="headerlink" title="中介者模式（Mediator）"></a>中介者模式（Mediator）</h3><h3 id="备忘录模式（Memento）"><a href="#备忘录模式（Memento）" class="headerlink" title="备忘录模式（Memento）"></a>备忘录模式（Memento）</h3><h3 id="观察者模式（Observer）"><a href="#观察者模式（Observer）" class="headerlink" title="观察者模式（Observer）"></a>观察者模式（Observer）</h3><h3 id="状态模式（State）"><a href="#状态模式（State）" class="headerlink" title="状态模式（State）"></a>状态模式（State）</h3><p>解决系统中复杂对象的状态转换以及不同状态下行为的封装问题</p>
<p>将一个对象的状态从对象中分离出来，封装到专门的状态类中<br>对于客户端而言，无需关心对象状态的转换及对象所处的当前状态</p>
<h4 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h4><p>允许一个对象在其内部状态改变时改变它的行为，对象看起来似乎修改了它的类。</p>
<h4 id="结构图-1"><a href="#结构图-1" class="headerlink" title="结构图"></a>结构图</h4><p><img src="images/df91e55e-3457-4eac-8a82-fb329fea2265.png" alt="状态模式类图"></p>
<p><strong>Context（上下文）</strong>： 拥有多种状态的对象，维护一个抽象状态类 State 的引用，通过 setState() 方法可以注入不同的状态对象。<br><strong>State（抽象状态类）</strong>： 定义一个接口以封装与上下文的一个特定状态相关的行为，声明了各种不同状态对应的方法，子类中需要实现这些方法，相同的方法可以在抽象状态类中实现。<br><strong>ConcreteState（具体状态类）</strong>： 抽象状态类的子类，每个子类实现一种状态的相应行为。</p>
<h4 id="实例-1（使用具体状态类实现状态转换）"><a href="#实例-1（使用具体状态类实现状态转换）" class="headerlink" title="实例 1（使用具体状态类实现状态转换）"></a>实例 1（使用具体状态类实现状态转换）</h4><p><img src="images/4ad1e38a-17a7-468b-9ca0-f0077ba475a1.png" alt="状态模式实例1"></p>
<ul>
<li>Account充当环境类角色，</li>
<li>AccountState充当抽象状态角色，</li>
<li>NormalState、OverdraftState和RestrictedState充当具体状态角色</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//银行账户：环境类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> AccountState state; <span class="comment">//维持一个对抽象状态对象的引用</span></span><br><span class="line">	<span class="keyword">private</span> String owner; <span class="comment">//开户名</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> balance = <span class="number">0</span>; <span class="comment">//账户余额</span></span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Account</span><span class="params">(String owner,<span class="keyword">double</span> init)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.owner = owner;</span><br><span class="line">		<span class="keyword">this</span>.balance = balance;</span><br><span class="line">		<span class="keyword">this</span>.state = <span class="keyword">new</span> NormalState(<span class="keyword">this</span>); <span class="comment">//设置初始状态</span></span><br><span class="line">		System.out.println(<span class="keyword">this</span>.owner + <span class="string">&quot;开户，初始金额为&quot;</span> + init);	</span><br><span class="line">		System.out.println(<span class="string">&quot;---------------------------------------------&quot;</span>);	</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deposit</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="keyword">this</span>.owner + <span class="string">&quot;存款&quot;</span> + amount);</span><br><span class="line">		state.deposit(amount); <span class="comment">//调用状态对象的deposit()方法</span></span><br><span class="line">		System.out.println(<span class="string">&quot;现在余额为&quot;</span>+ <span class="keyword">this</span>.balance);</span><br><span class="line">		System.out.println(<span class="string">&quot;现在帐户状态为&quot;</span>+ <span class="keyword">this</span>.state.getClass().getName());</span><br><span class="line">		System.out.println(<span class="string">&quot;---------------------------------------------&quot;</span>);			</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">withdraw</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="keyword">this</span>.owner + <span class="string">&quot;取款&quot;</span> + amount);</span><br><span class="line">        state.withdraw(amount); <span class="comment">//调用状态对象的withdraw()方法</span></span><br><span class="line">		System.out.println(<span class="string">&quot;现在余额为&quot;</span>+ <span class="keyword">this</span>.balance);</span><br><span class="line">		System.out.println(<span class="string">&quot;现在帐户状态为&quot;</span>+ <span class="keyword">this</span>. state.getClass().getName());		</span><br><span class="line">		System.out.println(<span class="string">&quot;---------------------------------------------&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeInterest</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		state.computeInterest(); <span class="comment">//调用状态对象的computeInterest()方法</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//抽象状态类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountState</span> </span>&#123;</span><br><span class="line">	<span class="keyword">protected</span> Account acc;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">deposit</span><span class="params">(<span class="keyword">double</span> amount)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">withdraw</span><span class="params">(<span class="keyword">double</span> amount)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">computeInterest</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">stateCheck</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//正常状态：具体状态类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NormalState</span> <span class="keyword">extends</span> <span class="title">AccountState</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">NormalState</span><span class="params">(Account acc)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.acc = acc;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">NormalState</span><span class="params">(AccountState state)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.acc = state.acc;</span><br><span class="line">	&#125;</span><br><span class="line">		</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deposit</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() + amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">withdraw</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() - amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeInterest</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;正常状态，无须支付利息！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//状态转换</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stateCheck</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (acc.getBalance() &gt; -<span class="number">2000</span> &amp;&amp; acc.getBalance() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> OverdraftState(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (acc.getBalance() == -<span class="number">2000</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> RestrictedState(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (acc.getBalance() &lt; -<span class="number">2000</span>) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;操作受限！&quot;</span>);</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;   </span><br><span class="line">&#125;  </span><br><span class="line"> </span><br><span class="line"><span class="comment">//透支状态：具体状态类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OverdraftState</span> <span class="keyword">extends</span> <span class="title">AccountState</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">OverdraftState</span><span class="params">(AccountState state)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.acc = state.acc;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deposit</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() + amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">withdraw</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() - amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeInterest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;计算利息！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//状态转换</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stateCheck</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (acc.getBalance() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> NormalState(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (acc.getBalance() == -<span class="number">2000</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> RestrictedState(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (acc.getBalance() &lt; -<span class="number">2000</span>) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;操作受限！&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//受限状态：具体状态类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RestrictedState</span> <span class="keyword">extends</span> <span class="title">AccountState</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">RestrictedState</span><span class="params">(AccountState state)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.acc = state.acc;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deposit</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() + amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">withdraw</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;帐号受限，取款失败&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeInterest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;计算利息！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//状态转换</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stateCheck</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(acc.getBalance() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> NormalState(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(acc.getBalance() &gt; -<span class="number">2000</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> OverdraftState(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 客户端</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		Account acc = <span class="keyword">new</span> Account(<span class="string">&quot;段誉&quot;</span>,<span class="number">0.0</span>);</span><br><span class="line">		acc.deposit(<span class="number">1000</span>);</span><br><span class="line">		acc.withdraw(<span class="number">2000</span>);</span><br><span class="line">		acc.deposit(<span class="number">3000</span>);</span><br><span class="line">		acc.withdraw(<span class="number">4000</span>);</span><br><span class="line">		acc.withdraw(<span class="number">1000</span>);</span><br><span class="line">		acc.computeInterest();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="实现-2（使用环境类实现状态切换）"><a href="#实现-2（使用环境类实现状态切换）" class="headerlink" title="实现 2（使用环境类实现状态切换）"></a>实现 2（使用环境类实现状态切换）</h4><p><img src="images/f751cedd-2e20-4adc-9149-d4f38eb277df.png" alt="状态模式实例2"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//屏幕类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Screen</span> </span>&#123;</span><br><span class="line">    <span class="comment">//枚举所有的状态，currentState表示当前状态</span></span><br><span class="line">	<span class="keyword">private</span> State currentState, normalState, largerState, largestState;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Screen</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">this</span>.normalState = <span class="keyword">new</span> NormalState(); <span class="comment">//创建正常状态对象</span></span><br><span class="line">    	<span class="keyword">this</span>.largerState = <span class="keyword">new</span> LargerState(); <span class="comment">//创建二倍放大状态对象</span></span><br><span class="line">    	<span class="keyword">this</span>.largestState = <span class="keyword">new</span> LargestState(); <span class="comment">//创建四倍放大状态对象</span></span><br><span class="line">		</span><br><span class="line">    	<span class="keyword">this</span>.currentState = normalState; <span class="comment">//设置初始状态</span></span><br><span class="line">    	<span class="keyword">this</span>.currentState.display();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setState</span><span class="params">(State state)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.currentState = state;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//单击事件处理方法，封转了对状态类中业务方法的调用和状态的转换</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">if</span> (<span class="keyword">this</span>.currentState == normalState) &#123;</span><br><span class="line">    		<span class="keyword">this</span>.setState(largerState);</span><br><span class="line">    		<span class="keyword">this</span>.currentState.display();</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.currentState == largerState) &#123;</span><br><span class="line">    		<span class="keyword">this</span>.setState(largestState);</span><br><span class="line">    		<span class="keyword">this</span>.currentState.display();</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.currentState == largestState) &#123;</span><br><span class="line">    		<span class="keyword">this</span>.setState(normalState);</span><br><span class="line">    		<span class="keyword">this</span>.currentState.display();</span><br><span class="line">    	&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//抽象状态类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">State</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//正常状态类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NormalState</span> <span class="keyword">extends</span> <span class="title">State</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;正常大小！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//二倍状态类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LargerState</span> <span class="keyword">extends</span> <span class="title">State</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;二倍大小！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//四倍状态类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LargestState</span> <span class="keyword">extends</span> <span class="title">State</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;四倍大小！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		Screen screen = <span class="keyword">new</span> Screen();</span><br><span class="line">		screen.onClick();</span><br><span class="line">		screen.onClick();</span><br><span class="line">		screen.onClick();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="优点-2"><a href="#优点-2" class="headerlink" title="优点"></a>优点</h4><ol>
<li>封装了状态转换规则，对状态转换进行集中管理</li>
<li>将所有与某个状态的行为放到一个类中，只需注入一个不同状态对象就可实现不同行为</li>
<li>避免使用庞大的条件判断</li>
<li>可以共享一个状态对象，减少系统中对象个数</li>
</ol>
<h4 id="缺点-3"><a href="#缺点-3" class="headerlink" title="缺点"></a>缺点</h4><ol>
<li>对开闭原则支持不好，增加状态需要修改状态转换代码，修改某个状态需要修改对应类。</li>
<li>使用不当会导致程序结构和代码混乱</li>
</ol>
<h4 id="适用场景-1"><a href="#适用场景-1" class="headerlink" title="适用场景"></a>适用场景</h4><ol>
<li>对象的行为依赖它的状态，状态的改变会导致行为的变化</li>
<li>包含大量对象状态有关的条件判断，增加或删除状态不方便，耦合性太高。</li>
</ol>
<h3 id="空对象模式（Null-Object-Pattern）"><a href="#空对象模式（Null-Object-Pattern）" class="headerlink" title="空对象模式（Null Object Pattern）"></a>空对象模式（Null Object Pattern）</h3><h3 id="策略模式（Strategy）"><a href="#策略模式（Strategy）" class="headerlink" title="策略模式（Strategy）"></a>策略模式（Strategy）</h3><p><strong>将算法的定义和使用分离</strong>，一种可插入式(Pluggable)算法的实现方案<br>灵活的选择解决途径，可以方便增加新的解决途径</p>
<h4 id="定义-2"><a href="#定义-2" class="headerlink" title="定义"></a>定义</h4><p>定义一系列算法类，将每个算法封装起来，让他们可以相互替换，让算法独立于使用他的客户而变化。</p>
<p>每一个类封装一种具体算法，每一个类是一种策略，<br>使用一个抽象策略来做规则定义。</p>
<h4 id="结构图-2"><a href="#结构图-2" class="headerlink" title="结构图"></a>结构图</h4><p><img src="images/df91e55e-3457-4eac-8a82-fb329fea2265.png" alt="策略模式类图"><br>客户类 Context 中建立一个抽象策略类的引用，<br>通过注入的方式在客户端传入一个具体策略对象，<br>也可通过反射动态创建具体策略对象</p>
<h4 id="实例-1"><a href="#实例-1" class="headerlink" title="实例 1"></a>实例 1</h4><p><img src="images/1db8517a-af91-4f96-b913-afa6e06fe3ce.png" alt="策略模式实例1"><br>MovieTicket充当环境类角色，<br>Discount充当抽象策略角色，<br>StudentDiscount、 ChildrenDiscount 和VIPDiscount充当具体策略角色</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//电影票类：环境类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MovieTicket</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line">	<span class="keyword">private</span> Discount discount; <span class="comment">//维持一个对抽象折扣类的引用</span></span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(<span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.price = price;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//注入一个折扣类对象</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDiscount</span><span class="params">(Discount discount)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.discount = discount;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//调用折扣类的折扣价计算方法</span></span><br><span class="line">		<span class="keyword">return</span> discount.calculate(<span class="keyword">this</span>.price);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//折扣类：抽象策略类</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Discount</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> price)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//学生票折扣类：具体策略类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentDiscount</span> <span class="keyword">implements</span> <span class="title">Discount</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;学生票：&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> price * <span class="number">0.8</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="comment">//儿童票折扣类：具体策略类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildrenDiscount</span> <span class="keyword">implements</span> <span class="title">Discount</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;儿童票：&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> price - <span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="comment">//VIP会员票折扣类：具体策略类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VIPDiscount</span> <span class="keyword">implements</span> <span class="title">Discount</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;VIP票：&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;增加积分！&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> price * <span class="number">0.5</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.xml.parsers.*;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.*;</span><br><span class="line"><span class="keyword">import</span> org.xml.sax.SAXException;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XMLUtil</span> </span>&#123;</span><br><span class="line"><span class="comment">//该方法用于从XML配置文件中提取具体类类名，并返回一个实例对象</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">//创建文档对象</span></span><br><span class="line">			DocumentBuilderFactory dFactory = DocumentBuilderFactory.newInstance();</span><br><span class="line">			DocumentBuilder builder = dFactory.newDocumentBuilder();</span><br><span class="line">			Document doc;							</span><br><span class="line">			doc = builder.parse(<span class="keyword">new</span> File(<span class="string">&quot;config.xml&quot;</span>)); </span><br><span class="line">		</span><br><span class="line">			<span class="comment">//获取包含类名的文本节点</span></span><br><span class="line">			NodeList nl = doc.getElementsByTagName(<span class="string">&quot;className&quot;</span>);</span><br><span class="line">            Node classNode=nl.item(<span class="number">0</span>).getFirstChild();</span><br><span class="line">            String cName=classNode.getNodeValue();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//通过类名生成实例对象并将其返回</span></span><br><span class="line">            Class c=Class.forName(cName);</span><br><span class="line">	  	    Object obj=c.newInstance();</span><br><span class="line">            <span class="keyword">return</span> obj;</span><br><span class="line">        &#125;   </span><br><span class="line">        <span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">           	e.printStackTrace();</span><br><span class="line">           	<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">className</span>&gt;</span>StudentDiscount<span class="tag">&lt;/<span class="name">className</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		MovieTicket mt = <span class="keyword">new</span> MovieTicket();</span><br><span class="line">		<span class="keyword">double</span> originalPrice = <span class="number">60.0</span>;</span><br><span class="line">		<span class="keyword">double</span> currentPrice;</span><br><span class="line">		</span><br><span class="line">		mt.setPrice(originalPrice);</span><br><span class="line">		System.out.println(<span class="string">&quot;原始价为：&quot;</span> + originalPrice);</span><br><span class="line">		System.out.println(<span class="string">&quot;---------------------------------&quot;</span>);</span><br><span class="line">			</span><br><span class="line">		Discount discount;</span><br><span class="line">		discount = (Discount)XMLUtil.getBean(); <span class="comment">//读取配置文件并反射生成具体折扣对象</span></span><br><span class="line">		mt.setDiscount(discount); <span class="comment">//注入折扣对象</span></span><br><span class="line">		</span><br><span class="line">		currentPrice = mt.getPrice();</span><br><span class="line">		System.out.println(<span class="string">&quot;折后价为：&quot;</span> + currentPrice);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="实例-2"><a href="#实例-2" class="headerlink" title="实例 2"></a>实例 2</h4><p><img src="images/f5fa9f5d-858b-4fb7-9166-32630362336f.png" alt="策略模式实例2"><br>Container类充当环境角色Context，<br>LayoutManager作为所有布局类的公共父类扮演了抽象策略角色，它给出所有具体布局类所需的接口，<br>具体策略类是LayoutManager的子类，也就是各种具体的布局类，它们封装了不同的布局方式。<br>也可以设计并实现自己的布局类，只需要将自己设计的布局类作为LayoutManager的子类就可以</p>
<h4 id="优点-3"><a href="#优点-3" class="headerlink" title="优点"></a>优点</h4><ol>
<li><strong>完美支持开闭原则</strong>，可以在不修改原有系统的基础上选择算法或行为，也可以灵活地增加新的算法或行为</li>
<li>提供一种可替换继承关系的方法，<ol>
<li>避免使用继承时算法与算法本身混在一起，不符合单一职责原则</li>
<li>避免使用继承时无法实现算法或行为运行时动态切换。</li>
</ol>
</li>
<li>避免多重条件选择语句</li>
</ol>
<h4 id="缺点-4"><a href="#缺点-4" class="headerlink" title="缺点"></a>缺点</h4><ol>
<li>客户端需要知道所有策略类，并自定决定使用哪一个策略。</li>
<li>会产生很多具体策略类，任何细小变化都需要增加一个新的具体策略类</li>
<li>无法同时使用多个策略类</li>
</ol>
<h4 id="使用场景-1"><a href="#使用场景-1" class="headerlink" title="使用场景"></a>使用场景</h4><ol>
<li>需要动态在几种算法中选择一种，可以将这些算法封装到一个个具体算法类中，这些算法类都是一个抽象算法类的子类。客户端可以选择任何一个具体算法类，并只需要维持一个抽象算法类的实例。</li>
<li>一个对象有很多行为，可以把这些行为转移到相应的具体策略里，避免难以维护的多重条件选择语句。</li>
<li>不希望客户端知道复杂的、与算法相关的数据结构</li>
</ol>
<h3 id="模板方法模式（Template-Method）"><a href="#模板方法模式（Template-Method）" class="headerlink" title="模板方法模式（Template Method）"></a>模板方法模式（Template Method）</h3><p>一种基于继承的代码复用技术</p>
<h4 id="定义-3"><a href="#定义-3" class="headerlink" title="定义"></a>定义</h4><p>定义一个操作中算法的框架，将一些步骤延迟到子类中。<br>模板方法模式使得子类可以不改变一个算法的结构，即可重定义该算法的某些特定步骤。</p>
<p>某个方法实现需要多个步骤，其中<strong>有些步骤固定</strong>，而<strong>有些步骤不固定</strong>，存在可变性。</p>
<blockquote>
<p><strong>模板方法</strong>： 调用基本方法同时定义基本方法执行次序的方法<br><strong>基本方法</strong>： 实现功能的每个步骤对应的方法</p>
</blockquote>
<p>在模板方法模式中，由于面向对象的多态性，子类对象在运行时将覆盖父类对象，子类中定义的方法也将覆盖父类中定义的方法，<br>因此程序在运行时，具体子类的基本方法将覆盖父类中定义的基本方法，子类的钩子方法也将覆盖父类的钩子方法，从而可以通过在子类中实现的钩子方法对父类方法的执行进行约束，实现子类对父类行为的反向控制</p>
<h4 id="结构图-3"><a href="#结构图-3" class="headerlink" title="结构图"></a>结构图</h4><p><img src="images/e1ee8b0a-0a19-4f95-8b53-20ead9fac507.png" alt="模板方法类图"><br>在抽象类中，模板方法 TemplateMethod() 定义了算法的框架，<br>在模板方法中调用基本方法以实现完整的算法，每一个基本方法如 PrimitiveOperation1()、PrimitiveOperation2() 等均实现了算法的一部分，<br>对于所有子类都相同的基本方法可在父类提供具体实现，例如 PrimitiveOperation1()，<br>否则在父类声明为抽象方法或钩子方法，由不同的子类提供不同的实现，例如 PrimitiveOperation2() 和 PrimitiveOperation3()。</p>
<h4 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h4><p>模板方法、固定步骤的基本方法放在父类<br>不固定步骤的基本方法声明在父类，实现在单独的子类<br>运行时选择一种具体子类</p>
<h5 id="模板方法"><a href="#模板方法" class="headerlink" title="模板方法"></a>模板方法</h5><p>定义在抽象类中<br>组合基本方法</p>
<h5 id="基本方法"><a href="#基本方法" class="headerlink" title="基本方法"></a>基本方法</h5><p>实现各个步骤的方法，是模板方法的组成部分</p>
<ol>
<li>抽象方法<br> 由抽象类声明、具体子类实现</li>
<li>具体方法<br> 由一个抽象类或具体类声明并实现，子类可以覆盖也可以直接继承</li>
<li>钩子方法<br> 由一个抽象类或具体类声明并实现，父类给出一个默认空实现（或非空实现）</li>
</ol>
<h4 id="优点-4"><a href="#优点-4" class="headerlink" title="优点"></a>优点</h4><ol>
<li>符合单一职责和开闭原则，不同子类可以提供不同实现，方便更换和增加新的子类</li>
<li>子类实现时不会改变父类中的执行顺序</li>
<li>可以实现一种反向控制结构，子类覆盖父类的钩子方法来决定某一特定步骤是否需要执行</li>
</ol>
<h4 id="缺点-5"><a href="#缺点-5" class="headerlink" title="缺点"></a>缺点</h4><ol>
<li>需要为每个基本方法不同实现提供一个子类，如果父类可变的方法太多，会导致类的个数增加，使得系统庞大，设计更抽象，这种情况<strong>可以结合桥接模式</strong>进行设计。</li>
</ol>
<h4 id="适用场景-2"><a href="#适用场景-2" class="headerlink" title="适用场景"></a>适用场景</h4><ol>
<li>对一些复杂算法进行分割，一次性实现一个算法的不变部分，并将可变的行为留给子类来实现<ol>
<li>将算法中固定不变部分设计为模板方法和父类具体方法，</li>
<li>将可以改变的细节有子类来实现</li>
</ol>
</li>
<li>需要提取子类公共行为集中到公共父类避免代码重复</li>
<li>需要通过子类来决定父类算法中某个步骤是否执行，实现对父类反向控制</li>
</ol>
<h3 id="访问者模式（Visitor）"><a href="#访问者模式（Visitor）" class="headerlink" title="访问者模式（Visitor）"></a>访问者模式（Visitor）</h3><p>为不同类型的元素提供多种访问操作方式，而且可以在不修改原有系统的情况下增加新的操作方式。</p>
<h4 id="定义-4"><a href="#定义-4" class="headerlink" title="定义"></a>定义</h4><p>提供一个作用于某对象结构中的各元素的操作表示，它使我们可以在不改变各元素的类的前提下定义作用于这些元素的新操作。</p>
<h4 id="结构图-4"><a href="#结构图-4" class="headerlink" title="结构图"></a>结构图</h4><p><img src="images/085cbffc-d205-4715-a125-67d6a6d2f17f.png" alt="访问者模式类图"><br><strong>Vistor（抽象访问者）</strong>： 为每个具体元素类声明一个访问操作，具体访问者需要实现这些操作方法。<br><strong>ConcreteVisitor（具体访问者）</strong>：实现每个由访问者声明的操作，每个操作作用于访问对象结构中一种类型的元素。<br><strong>Element（抽象元素）</strong>：抽象类或接口，通常以一个抽象访问者为参数。<br><strong>ConcreteElement（具体元素）</strong>：在实现方法中调用访问者的访问方法完成对一个元素的操作<br><strong>ObjectStructure（对象结构）</strong>：元素的集合，存放元素对象，并提供遍历元素方法。可以结合组合模式实现或一个简单的集合对象。</p>
<h4 id="实例-1-1"><a href="#实例-1-1" class="headerlink" title="实例 1"></a>实例 1</h4><p><img src="images/79faf93d-2624-45d7-8788-e48e33bad712.png" alt="访问者模式实例1"></p>
<p>Department充当抽象访问者角色<br>FADepartment表示财务部，<br>HRDepartment表示人力资源部，它们充当具体访问者角色，<br>Employee充当抽象元素角色<br>EmployeeList充当对象结构，用于存储员工列表；<br>FulltimeEmployee表示正式员工，<br>ParttimeEmployee表示临时工，它们充当具体元素角色</p>
<table>
<thead>
<tr>
<th></th>
<th>全职员工</th>
<th>临时工</th>
</tr>
</thead>
<tbody><tr>
<td>财务部</td>
<td></td>
<td></td>
</tr>
<tr>
<td>人力资源部</td>
<td></td>
<td></td>
</tr>
<tr>
<td>新的访问者……</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//员工类：抽象元素类</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Department handler)</span></span>; <span class="comment">//接受一个抽象访问者访问</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//全职员工类：具体元素类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FulltimeEmployee</span> <span class="keyword">implements</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> weeklyWage;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> workTime;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">FulltimeEmployee</span><span class="params">(String name,<span class="keyword">double</span> weeklyWage,<span class="keyword">int</span> workTime)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.weeklyWage = weeklyWage;</span><br><span class="line">		<span class="keyword">this</span>.workTime = workTime;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//兼职员工类：具体元素类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParttimeEmployee</span> <span class="keyword">implements</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> hourWage;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> workTime;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ParttimeEmployee</span><span class="params">(String name,<span class="keyword">double</span> hourWage,<span class="keyword">int</span> workTime)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.hourWage = hourWage;</span><br><span class="line">		<span class="keyword">this</span>.workTime = workTime;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//部门类：抽象访问者类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Department</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//声明一组重载的访问方法，用于访问不同类型的具体元素</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(FulltimeEmployee employee)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(ParttimeEmployee employee)</span></span>;	</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//财务部类：具体访问者类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FADepartment</span> <span class="keyword">extends</span> <span class="title">Department</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//实现财务部对全职员工的访问</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(FulltimeEmployee employee)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> workTime = employee.getWorkTime();</span><br><span class="line">		<span class="keyword">double</span> weekWage = employee.getWeeklyWage();</span><br><span class="line">		<span class="keyword">if</span>(workTime &gt; <span class="number">40</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			weekWage = weekWage + (workTime - <span class="number">40</span>) * <span class="number">100</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(workTime &lt; <span class="number">40</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			weekWage = weekWage - (<span class="number">40</span> - workTime) * <span class="number">80</span>;</span><br><span class="line">			<span class="keyword">if</span>(weekWage &lt; <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				weekWage = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">&quot;正式员工&quot;</span> + employee.getName() + <span class="string">&quot;实际工资为：&quot;</span> + weekWage + <span class="string">&quot;元。&quot;</span>);			</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//实现财务部对兼职员工的访问</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(ParttimeEmployee employee)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> workTime = employee.getWorkTime();</span><br><span class="line">		<span class="keyword">double</span> hourWage = employee.getHourWage();</span><br><span class="line">		System.out.println(<span class="string">&quot;临时工&quot;</span> + employee.getName() + <span class="string">&quot;实际工资为：&quot;</span> + workTime * hourWage + <span class="string">&quot;元。&quot;</span>);		</span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//人力资源部类：具体访问者类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HRDepartment</span> <span class="keyword">extends</span> <span class="title">Department</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//实现人力资源部对全职员工的访问</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(FulltimeEmployee employee)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> workTime = employee.getWorkTime();</span><br><span class="line">		System.out.println(<span class="string">&quot;正式员工&quot;</span> + employee.getName() + <span class="string">&quot;实际工作时间为：&quot;</span> + workTime + <span class="string">&quot;小时。&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(workTime &gt; <span class="number">40</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;正式员工&quot;</span> + employee.getName() + <span class="string">&quot;加班时间为：&quot;</span> + (workTime - <span class="number">40</span>) + <span class="string">&quot;小时。&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(workTime &lt; <span class="number">40</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;正式员工&quot;</span> + employee.getName() + <span class="string">&quot;请假时间为：&quot;</span> + (<span class="number">40</span> - workTime) + <span class="string">&quot;小时。&quot;</span>);</span><br><span class="line">		&#125;						</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//实现人力资源部对兼职员工的访问</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(ParttimeEmployee employee)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> workTime = employee.getWorkTime();</span><br><span class="line">		System.out.println(<span class="string">&quot;临时工&quot;</span> + employee.getName() + <span class="string">&quot;实际工作时间为：&quot;</span> + workTime + <span class="string">&quot;小时。&quot;</span>);</span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//员工列表类：对象结构</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmployeeList</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//定义一个集合用于存储员工对象</span></span><br><span class="line">	<span class="keyword">private</span> ArrayList&lt;Employee&gt; list = <span class="keyword">new</span> ArrayList&lt;Employee&gt;();</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addEmployee</span><span class="params">(Employee employee)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		list.add(employee);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//遍历访问员工集合中的每一个员工对象</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Department handler)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(Object obj : list)</span><br><span class="line">		&#123;</span><br><span class="line">			((Employee)obj).accept(handler);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		EmployeeList list = <span class="keyword">new</span> EmployeeList();</span><br><span class="line">		Employee fte1,fte2,fte3,pte1,pte2;</span><br><span class="line"> </span><br><span class="line">		fte1 = <span class="keyword">new</span> FulltimeEmployee(<span class="string">&quot;张无忌&quot;</span>,<span class="number">3200.00</span>,<span class="number">45</span>);</span><br><span class="line">		fte2 = <span class="keyword">new</span> FulltimeEmployee(<span class="string">&quot;杨过&quot;</span>,<span class="number">2000.00</span>,<span class="number">40</span>);</span><br><span class="line">		fte3 = <span class="keyword">new</span> FulltimeEmployee(<span class="string">&quot;段誉&quot;</span>,<span class="number">2400.00</span>,<span class="number">38</span>);</span><br><span class="line">		pte1 = <span class="keyword">new</span> ParttimeEmployee(<span class="string">&quot;洪七公&quot;</span>,<span class="number">80.00</span>,<span class="number">20</span>);</span><br><span class="line">		pte2 = <span class="keyword">new</span> ParttimeEmployee(<span class="string">&quot;郭靖&quot;</span>,<span class="number">60.00</span>,<span class="number">18</span>);</span><br><span class="line"> </span><br><span class="line">		list.addEmployee(fte1);</span><br><span class="line">		list.addEmployee(fte2);</span><br><span class="line">		list.addEmployee(fte3);</span><br><span class="line">		list.addEmployee(pte1);</span><br><span class="line">		list.addEmployee(pte2);</span><br><span class="line"> </span><br><span class="line">		Department dep;</span><br><span class="line">		dep = (Department)XMLUtil.getBean();</span><br><span class="line">		list.accept(dep);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="优点-5"><a href="#优点-5" class="headerlink" title="优点"></a>优点</h4><ol>
<li>方便增加新的访问者，符合开闭原则</li>
<li>集中有关元素对象的访问行为到一个访问者对象中</li>
</ol>
<h4 id="缺点-6"><a href="#缺点-6" class="headerlink" title="缺点"></a>缺点</h4><ol>
<li>增加新的元素类很困难，违背开闭原则，<strong>每增加一个新的元素都要在抽象访问者类中增加一个新的抽象方法，并在每一个具体访问者类中增加相应的具体操作</strong></li>
<li>破坏封装，元素对象会暴露一些内部操作和状态</li>
</ol>
<h4 id="适用场景-3"><a href="#适用场景-3" class="headerlink" title="适用场景"></a>适用场景</h4><ol>
<li>一个对象机构包含多个类型的对象，需要对这些对象实施依赖具体类型的操作。针对每一种具体的类型提供一个访问操作，不同类型的对象可以有不同的访问操作。</li>
<li>需要对一个对象结构中的对象进行不同且不相关的操作，避免污染对象的类，增加新操作时不需要修改这些类。</li>
<li>对象对应的类很少改变，但经常需要在此对象结构上定义新的操作。</li>
</ol>

      
    </div>
    <div class="article-footer">
      <!-- <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="https://abcdoc-cn.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="设计模式" target="_blank" rel="external">https://abcdoc-cn.github.io/设计模式/设计模式/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote> -->


    </div>
  </article>
  
    
  <section id="comments">
  	
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/Typora%20%E6%A0%87%E9%A2%98%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0%E5%BA%8F%E5%88%97%E5%8F%B7/" title="Typora 标题自动添加序列号"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/MySQL/MySQL%20%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/" title="MySQL 语句执行顺序"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  
  <div class="bar-right">
    
  </div>
  </div>
</nav>
  


</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/abcdoc-cn" target="_blank" title="Github" ><i class="icon icon-github"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   




   






</body>
</html>