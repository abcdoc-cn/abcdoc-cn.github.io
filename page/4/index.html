<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    
    <title>天空</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    

    

    

    

    

    

    

    
<link rel="stylesheet" href="/dist/build.css?v=1623049492098.css">


    <script>
        window.isPost = false
        window.aomori = {
            
            
            
        }
        window.aomori_logo_typed_animated = false
        window.aomori_search_algolia = false

    </script>

<meta name="generator" content="Hexo 5.4.0"></head>

<body>

    <div class="container">
    <header class="header">
        <div class="header-type">
            
            <div class="header-type-inner">
                
                    <a class="header-type-title" href="/">天空</a>
                
    
                
            </div>
        </div>
        <div class="header-menu">
            <div class="header-menu-inner">
                
                <a href="/">首页</a>
                
                <a href="/archives">存档</a>
                
            </div>
            <div class="header-menu-social">
                
            </div>
        </div>

        <div class="header-menu-mobile">
            <div class="header-menu-mobile-inner" id="mobile-menu-open">
                <i class="icon icon-menu"></i>
            </div>
        </div>
    </header>

    <div class="header-menu-mobile-menu">
        <div class="header-menu-mobile-menu-bg"></div>
        <div class="header-menu-mobile-menu-wrap">
            <div class="header-menu-mobile-menu-inner">
                <div class="header-menu-mobile-menu-close" id="mobile-menu-close">
                    <i class="icon icon-cross"></i>
                </div>
                <div class="header-menu-mobile-menu-list">
                    
                    <a href="/">首页</a>
                    
                    <a href="/archives">存档</a>
                    
                </div>
            </div>
        </div>
    </div>

</div>

    <div class="container">
        <div class="main">
            <section class="inner">
                <section class="inner-main">
                    <div class="index">
  
    
      <article
id="post-常用工具/Typora 标题自动添加序列号"
class="article article-type-post"
>



<div class="article-inner">
    

    <div class="article-body">
    <header class="article-title">
        <a href="/%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/Typora%20%E6%A0%87%E9%A2%98%E8%87%AA%E5%8A%A8%E6%B7%BB%E5%8A%A0%E5%BA%8F%E5%88%97%E5%8F%B7/">Typora 标题自动添加序列号</a>
    </header>
    <div class="article-entry post-inner-html">
        
        <ol>
<li>文件 -&gt; 偏好设置</li>
</ol>
<p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-20200902114231502-d2329c1b4f5b4fcb933888d7a3a93156.png"></p>
<ol start="2">
<li>新建文件 <code>base.user.css</code></li>
</ol>
<p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-20200902114335204-3263000816c44ff099938c283fac92fa.png"></p>
<ol start="3">
<li><p>添加内容</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************</span></span><br><span class="line"><span class="comment">* Header Counters in TOC</span></span><br><span class="line"><span class="comment">**************************************/</span></span><br><span class="line"><span class="comment">/* No link underlines in TOC*/</span></span><br><span class="line"><span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line">	<span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-content</span> &#123;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h1toc h2toc h3toc h4toc h5toc h6toc</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h1</span> &#123;</span><br><span class="line">	<span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">1.5rem</span>;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h2toc</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h2</span> &#123;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">1.1rem</span>;</span><br><span class="line">	<span class="attribute">margin-left</span>: <span class="number">2rem</span>;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h3toc</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h3</span> &#123;</span><br><span class="line">	<span class="attribute">margin-left</span>: <span class="number">3rem</span>;</span><br><span class="line">	<span class="attribute">font-size</span>: .<span class="number">9rem</span>;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h4toc</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h4</span> &#123;</span><br><span class="line">	<span class="attribute">margin-left</span>: <span class="number">4rem</span>;</span><br><span class="line">	<span class="attribute">font-size</span>: .<span class="number">85rem</span>;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h5toc</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h5</span> &#123;</span><br><span class="line">	<span class="attribute">margin-left</span>: <span class="number">5rem</span>;</span><br><span class="line">	<span class="attribute">font-size</span>: .<span class="number">8rem</span>;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h6toc</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h6</span> &#123;</span><br><span class="line">	<span class="attribute">margin-left</span>: <span class="number">6rem</span>;</span><br><span class="line">	<span class="attribute">font-size</span>: .<span class="number">75rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h2</span>:before &#123;</span><br><span class="line">	color: black;</span><br><span class="line">	<span class="attribute">counter-increment</span>: h2toc;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h2</span> ~ <span class="selector-class">.md-toc-h3</span>:before &#123;</span><br><span class="line">	color: black;</span><br><span class="line">	<span class="attribute">counter-increment</span>: h3toc;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h3toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h2</span> ~ <span class="selector-class">.md-toc-h4</span>:before &#123;</span><br><span class="line">	color: black;</span><br><span class="line">	<span class="attribute">counter-increment</span>: h4toc;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h3toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h4toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h2</span> ~ <span class="selector-class">.md-toc-h5</span>:before &#123;</span><br><span class="line">	color: black;</span><br><span class="line">	<span class="attribute">counter-increment</span>: h5toc;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h3toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h4toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h5toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h2</span> ~ <span class="selector-class">.md-toc-h6</span>:before &#123;</span><br><span class="line">	color: black;</span><br><span class="line">	<span class="attribute">counter-increment</span>: h6toc;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h3toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h4toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h5toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h6toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h1</span>:before &#123;</span><br><span class="line">	color: black;</span><br><span class="line">	<span class="attribute">counter-increment</span>: h1toc;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h1</span> ~ <span class="selector-class">.md-toc-h2</span>:before &#123;</span><br><span class="line">	color: black;</span><br><span class="line">	<span class="attribute">counter-increment</span>: h2toc;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h1</span> ~ <span class="selector-class">.md-toc-h3</span>:before &#123;</span><br><span class="line">	color: black;</span><br><span class="line">	<span class="attribute">counter-increment</span>: h3toc;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h3toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h1</span> ~ <span class="selector-class">.md-toc-h4</span>:before &#123;</span><br><span class="line">	color: black;</span><br><span class="line">	<span class="attribute">counter-increment</span>: h4toc;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h3toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h4toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h1</span> ~ <span class="selector-class">.md-toc-h5</span>:before &#123;</span><br><span class="line">	color: black;</span><br><span class="line">	<span class="attribute">counter-increment</span>: h5toc;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h3toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h4toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h5toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h1</span> ~ <span class="selector-class">.md-toc-h6</span>:before &#123;</span><br><span class="line">	color: black;</span><br><span class="line">	<span class="attribute">counter-increment</span>: h6toc;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h2toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h3toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h4toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h5toc) <span class="string">&quot;. &quot;</span> <span class="built_in">counter</span>(h6toc) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h1</span> <span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line">	<span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h2</span> <span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line">	<span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h3</span> <span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line">	<span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h4</span> <span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line">	<span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h5</span> <span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line">	<span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.md-toc-h6</span> <span class="selector-class">.md-toc-inner</span> &#123;</span><br><span class="line">	<span class="attribute">margin-left</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**************************************</span></span><br><span class="line"><span class="comment">* Header Counters in Content</span></span><br><span class="line"><span class="comment">**************************************/</span></span><br><span class="line"><span class="comment">/** initialize css counter*/</span></span><br><span class="line"><span class="selector-id">#write</span> &#123;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h1 h2 h3 h4 h5 h6</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h1</span> &#123;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h3</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h3</span> &#123;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h4</span> &#123;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h5</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">h5</span> &#123;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h6</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/** put counter result into headings*/</span></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h2</span>:before &#123;</span><br><span class="line">	counter-increment: h2;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h2</span> ~ <span class="selector-tag">h3</span>:before, </span><br><span class="line">h2 ~ h3.md-focus.md-heading:before &#123;</span><br><span class="line">	/*override the default style for focused headings*/</span><br><span class="line">	counter-increment: h3;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h2</span> ~ <span class="selector-tag">h4</span>:before, </span><br><span class="line">h2 ~ h4.md-focus.md-heading:before &#123;</span><br><span class="line">	counter-increment: h4;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h2</span> ~ <span class="selector-tag">h5</span>:before, </span><br><span class="line">h2 ~ h5.md-focus.md-heading:before &#123;</span><br><span class="line">	counter-increment: h5;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h5) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h2</span> ~ <span class="selector-tag">h6</span>:before, </span><br><span class="line">h2 ~ h6.md-focus.md-heading:before &#123;</span><br><span class="line">	counter-increment: h6;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h5) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h6) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h1</span>:before &#123;</span><br><span class="line">	counter-increment: h1;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h1</span> ~ <span class="selector-tag">h2</span>:before &#123;</span><br><span class="line">	counter-increment: h2;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h1</span> ~ <span class="selector-tag">h3</span>:before, </span><br><span class="line">h1 ~ h3.md-focus.md-heading:before &#123;</span><br><span class="line">	/*override the default style for focused headings*/</span><br><span class="line">	counter-increment: h3;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h1</span> ~ <span class="selector-tag">h4</span>:before, </span><br><span class="line">h1 ~ h4.md-focus.md-heading:before &#123;</span><br><span class="line">	counter-increment: h4;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h1</span> ~ <span class="selector-tag">h5</span>:before, </span><br><span class="line">h1 ~ h5.md-focus.md-heading:before &#123;</span><br><span class="line">	counter-increment: h5;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h5) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#write</span> <span class="selector-tag">h1</span> ~ <span class="selector-tag">h6</span>:before, </span><br><span class="line">h1 ~ h6.md-focus.md-heading:before &#123;</span><br><span class="line">	counter-increment: h6;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h5) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h6) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** override the default style for focused headings*/</span></span><br><span class="line"><span class="selector-id">#write</span>&gt;<span class="selector-tag">h3</span><span class="selector-class">.md-focus</span>:before, #write&gt;h4.md-focus:before, #write&gt;h5.md-focus:before, #write&gt;h6.md-focus:before, h3.md-focus:before, h4.md-focus:before, h5.md-focus:before, h6.md-focus:before &#123;</span><br><span class="line">	color: inherit;</span><br><span class="line">	<span class="attribute">border</span>: inherit;</span><br><span class="line">	<span class="attribute">border-radius</span>: inherit;</span><br><span class="line">	<span class="attribute">position</span>: inherit;</span><br><span class="line">	<span class="attribute">left</span>: initial;</span><br><span class="line">	<span class="attribute">float</span>: none;</span><br><span class="line">	<span class="attribute">top</span>: initial;</span><br><span class="line">	<span class="attribute">font-size</span>: inherit;</span><br><span class="line">	<span class="attribute">padding-left</span>: inherit;</span><br><span class="line">	<span class="attribute">padding-right</span>: inherit;</span><br><span class="line">	<span class="attribute">vertical-align</span>: inherit;</span><br><span class="line">	<span class="attribute">font-weight</span>: inherit;</span><br><span class="line">	<span class="attribute">line-height</span>: inherit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**************************************</span></span><br><span class="line"><span class="comment">* Header Counters in sidebar</span></span><br><span class="line"><span class="comment">**************************************/</span></span><br><span class="line"><span class="selector-class">.sidebar-content</span> &#123;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h1 h2 h3 h4 h5 h6</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h1</span> &#123;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h2</span> &#123;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h3</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h3</span> &#123;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h4</span> &#123;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h5</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h5</span> &#123;</span><br><span class="line">	<span class="attribute">counter-reset</span>: h6</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h2</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span>:before &#123;</span><br><span class="line">	counter-increment: h2;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h2</span> ~ <span class="selector-class">.outline-h3</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span>:before &#123;</span><br><span class="line">	counter-increment: h3;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h2</span> ~ <span class="selector-class">.outline-h4</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span>:before &#123;</span><br><span class="line">	counter-increment: h4;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h2</span> ~ <span class="selector-class">.outline-h5</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span>:before &#123;</span><br><span class="line">	counter-increment: h5;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h5) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h2</span> ~ <span class="selector-class">.outline-h6</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span>:before &#123;</span><br><span class="line">	counter-increment: h6;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h5) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h6) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h1</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span>:before &#123;</span><br><span class="line">	counter-increment: h1;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h1</span> ~ <span class="selector-class">.outline-h2</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span>:before &#123;</span><br><span class="line">	counter-increment: h2;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h1</span> ~ <span class="selector-class">.outline-h3</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span>:before &#123;</span><br><span class="line">	counter-increment: h3;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h1</span> ~ <span class="selector-class">.outline-h4</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span>:before &#123;</span><br><span class="line">	counter-increment: h4;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h1</span> ~ <span class="selector-class">.outline-h5</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span>:before &#123;</span><br><span class="line">	counter-increment: h5;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h5) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.outline-h1</span> ~ <span class="selector-class">.outline-h6</span>&gt;<span class="selector-class">.outline-item</span>&gt;<span class="selector-class">.outline-label</span>:before &#123;</span><br><span class="line">	counter-increment: h6;</span><br><span class="line">	<span class="attribute">content</span>: <span class="built_in">counter</span>(h1) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h2) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h3) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h4) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h5) <span class="string">&quot;.&quot;</span> <span class="built_in">counter</span>(h6) <span class="string">&quot;. &quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>重启 Typora</p>
</li>
</ol>

        
    </div>
    </div>

    <div class="article-badge">
        
        
    </div>

</div>

<footer class="article-footer">
    <div class="article-more-info">
    <div class="article-date">
  <time datetime="2021-04-25T07:58:53.321Z" itemprop="datePublished">2021-04-25</time>
</div>
    
        <div class="article-category">
        <a class="article-category-link" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a>
        </div>
    
    
        <div class="article-tag">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Typora/" rel="tag">Typora</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" rel="tag">开发工具</a></li></ul>
        </div>
    
    </div>
</footer>

</article>

    
  
    
      <article
id="post-设计模式/设计模式"
class="article article-type-post"
>



<div class="article-inner">
    

    <div class="article-body">
    <header class="article-title">
        <a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>
    </header>
    <div class="article-entry post-inner-html">
        
        <p>[TOC]</p>
<p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-08e7b6a919ec4b808374ec7263314188.png" alt="设计模式间的关系"></p>
<ul>
<li><strong>创建型模式</strong>，共五种：工厂方法模式、抽象工厂模式、单例模式、建造者模式、原型模式。</li>
<li><strong>结构型模式</strong>，共七种：适配器模式、装饰器模式、代理模式、外观模式、桥接模式、组合模式、享元模式。</li>
<li><strong>行为型模式</strong>，共十一种：策略模式、模板方法模式、观察者模式、迭代子模式、责任链模式、命令模式、备忘录模式、状态模式、访问者模式、中介者模式、解释器模式。</li>
</ul>
<h2 id="创建型模式"><a href="#创建型模式" class="headerlink" title="创建型模式"></a>创建型模式</h2><p><strong>关注怎样创建对象</strong><br>用于描述<strong>怎样创建对象</strong>，主要特点是<strong>将对象的创建与使用分离</strong>。<br><strong>提供一种在创建对象的同时隐藏创建逻辑的方式</strong>，而不是使用 new 运算符直接实例化对象。这使得程序在判断针对某个给定实例需要创建哪些对象时更加灵活。</p>
<p>在所有的工厂模式中： <strong>两个类 A 和 B 之间的关系应该仅仅是 A 创建 B 或者 A 使用 B，不能两种关系都有</strong></p>
<p>将对象的创建和使用分离，是的系统更加符合<strong>单一职责原则</strong>。</p>
<h3 id="简单工厂模式（Simple-Factory）"><a href="#简单工厂模式（Simple-Factory）" class="headerlink" title="简单工厂模式（Simple Factory）"></a>简单工厂模式（Simple Factory）</h3><p><strong>不属于 23 个经典设计模式</strong>，是其他工厂模式的基础</p>
<p>客户端需要什么，只需传入一个正确的参数，就可以获取你所需要的对象，无须知道创建细节。</p>
<blockquote>
<p>对象相关的职责有三类： </p>
<ul>
<li>对象本身具有的职责<ul>
<li>对象本身所具有的一些数据和行为，可以通过一些公开的方法实现它的职责</li>
</ul>
</li>
<li>创建对象的职责</li>
<li>使用对象的职责</li>
</ul>
</blockquote>
<blockquote>
<p>创建对象的几种方法：</p>
<ul>
<li>使用 new 关键字</li>
<li>通过反射机制创建</li>
<li>通过 clone() 方法创建</li>
<li>通过工厂类创建</li>
</ul>
</blockquote>
<h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p>定义一个工厂类，它可以根据参数的不同返回不同的实例，被创建的实例通常都具有共同的父类。因为创建的实例方法都是静态方法，因此简单工厂模式又被称为静态工厂方法模式。</p>
<h4 id="结构图"><a href="#结构图" class="headerlink" title="结构图"></a>结构图</h4><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-ac6d045a5dff4d35bccbb5ee647056b1.png" alt="image.png"></p>
<ul>
<li>Factory（工厂角色）： 简单工厂模式的核心，<ul>
<li>负责实现所有产品实例的内部逻辑</li>
<li>可以被外界直接调用，创建所需的产品对象</li>
<li>提供静态的工厂方法 factoryMethod()，返回类型是抽象产品类型（Product）</li>
</ul>
</li>
<li>Product（抽象产品角色）： 工厂类创建的所有对象的父类<ul>
<li>封装各种产品对象的公有方法，它的引入提高系统灵活性，使工厂类中只需定义一个通用的工厂方法，因为所有创建的具体产品对象都是其子类对象。</li>
</ul>
</li>
<li>ConcreteProduct（具体产品角色）： 简单工厂模式的创建目标，<ul>
<li>所有被创建的对象都充当了这个角色的某个具体类的实例</li>
<li>每个具体产品角色都继承了抽象产品角色，需要实现在抽象产品中声明的抽象方法</li>
</ul>
</li>
<li>客户端： 客户端通过工厂类创建一个产品类的实例，无需直接使用 new 类创建对象 </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 抽象产品类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="comment">//所有产品类的公共业务方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">methodSame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//公共方法的实现</span></span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//声明抽象业务方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">methodDiff</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 具体产品类 A</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProductA</span> <span class="keyword">extends</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="comment">//实现业务方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">methodDiff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//业务方法的实现</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 具体产品类 B</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteProductB</span> <span class="keyword">extends</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="comment">//实现业务方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">methodDiff</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//业务方法的实现</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 工厂类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="comment">//静态工厂方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Product <span class="title">getProduct</span><span class="params">(String arg)</span> </span>&#123;</span><br><span class="line">		Product product = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">if</span> (arg.equalsIgnoreCase(<span class="string">&quot;A&quot;</span>)) &#123;</span><br><span class="line">			product = <span class="keyword">new</span> ConcreteProductA();</span><br><span class="line">            <span class="comment">//初始化设置product</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (arg.equalsIgnoreCase(<span class="string">&quot;B&quot;</span>)) &#123;</span><br><span class="line">			product = <span class="keyword">new</span> ConcreteProductB();</span><br><span class="line">            <span class="comment">//初始化设置product</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> product;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 客户端</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		Product product; </span><br><span class="line">		product = Factory.getProduct(<span class="string">&quot;A&quot;</span>); <span class="comment">//通过工厂类创建产品对象</span></span><br><span class="line">		product.methodSame();</span><br><span class="line">		product.methodDiff();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-922d751f73674490905256eb6cdcc9df.png" alt="image.png"></p>
<ul>
<li>抽象产品类： Chart 接口</li>
<li>具体产品类： HistogramChart、 PieChart、 LineChart</li>
<li>工厂类： ChartFactory</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//抽象图表接口：抽象产品类</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Chart</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//柱状图类：具体产品类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HistogramChart</span> <span class="keyword">implements</span> <span class="title">Chart</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">HistogramChart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;创建柱状图！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;显示柱状图！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//饼状图类：具体产品类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PieChart</span> <span class="keyword">implements</span> <span class="title">Chart</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">PieChart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;创建饼状图！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;显示饼状图！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//折线图类：具体产品类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LineChart</span> <span class="keyword">implements</span> <span class="title">Chart</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">LineChart</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;创建折线图！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;显示折线图！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//图表工厂类：工厂类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChartFactory</span> </span>&#123;</span><br><span class="line">    <span class="comment">//静态工厂方法</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Chart <span class="title">getChart</span><span class="params">(String type)</span> </span>&#123;</span><br><span class="line">		Chart chart = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">if</span> (type.equalsIgnoreCase(<span class="string">&quot;histogram&quot;</span>)) &#123;</span><br><span class="line">			chart = <span class="keyword">new</span> HistogramChart();</span><br><span class="line">			System.out.println(<span class="string">&quot;初始化设置柱状图！&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (type.equalsIgnoreCase(<span class="string">&quot;pie&quot;</span>)) &#123;</span><br><span class="line">			chart = <span class="keyword">new</span> PieChart();</span><br><span class="line">			System.out.println(<span class="string">&quot;初始化设置饼状图！&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (type.equalsIgnoreCase(<span class="string">&quot;line&quot;</span>)) &#123;</span><br><span class="line">			chart = <span class="keyword">new</span> LineChart();</span><br><span class="line">			System.out.println(<span class="string">&quot;初始化设置折线图！&quot;</span>);			</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> chart;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 客户端</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		Chart chart;</span><br><span class="line">		chart = ChartFactory.getChart(<span class="string">&quot;histogram&quot;</span>); <span class="comment">//通过静态工厂方法创建产品</span></span><br><span class="line">		chart.display();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="实例改进"><a href="#实例改进" class="headerlink" title="实例改进"></a>实例改进</h4><p>引入 config.xml ，在配置文件中定义 chartType</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">config</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">chartType</span>&gt;</span>histogram<span class="tag">&lt;/<span class="name">chartType</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.xml.parsers.*;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.*;</span><br><span class="line"><span class="keyword">import</span> org.xml.sax.SAXException;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XMLUtil</span> </span>&#123;</span><br><span class="line">    <span class="comment">//该方法用于从XML配置文件中提取图表类型，并返回类型名</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getChartType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">//创建文档对象</span></span><br><span class="line">			DocumentBuilderFactory dFactory = DocumentBuilderFactory.newInstance();</span><br><span class="line">			DocumentBuilder builder = dFactory.newDocumentBuilder();</span><br><span class="line">			Document doc;							</span><br><span class="line">			doc = builder.parse(<span class="keyword">new</span> File(<span class="string">&quot;config.xml&quot;</span>)); </span><br><span class="line">		</span><br><span class="line">			<span class="comment">//获取包含图表类型的文本节点</span></span><br><span class="line">			NodeList nl = doc.getElementsByTagName(<span class="string">&quot;chartType&quot;</span>);</span><br><span class="line">            Node classNode = nl.item(<span class="number">0</span>).getFirstChild();</span><br><span class="line">            String chartType = classNode.getNodeValue().trim();</span><br><span class="line">            <span class="keyword">return</span> chartType;</span><br><span class="line">        &#125;   </span><br><span class="line">       	<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">           	e.printStackTrace();</span><br><span class="line">        	<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		Chart chart;</span><br><span class="line">		String type = XMLUtil.getChartType(); <span class="comment">//读取配置文件中的参数</span></span><br><span class="line">		chart = ChartFactory.getChart(type); <span class="comment">//创建产品对象</span></span><br><span class="line">		chart.display();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ol>
<li>实现了对象创建和使用的分离，客户端只消费产品，不需要创建</li>
<li>客户端不需要知道创建产品类的类名，只需知道产品类对应的参数</li>
<li>通过引入配置文件，可以在不修改客户端的情况下更换或增加新的具体产品类</li>
</ol>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ol>
<li>工厂类集中了所有产品的创建逻辑，职责过重，一旦不能正常工作，整个系统受影响</li>
<li>会增加系统中类的个数</li>
<li>扩展困难，一旦添加新产品就要修改工厂逻辑，可能造成工厂逻辑过于复杂</li>
<li>使用了静态工厂方法，工厂类无法形成基于继承的等级结构</li>
</ol>
<h4 id="适用场景"><a href="#适用场景" class="headerlink" title="适用场景"></a>适用场景</h4><ol>
<li>工厂类负责创建的对象较少</li>
<li>客户端只知道传入工厂类的参数，对如何创建对象不关心</li>
</ol>
<h3 id="工厂模式（Factory）"><a href="#工厂模式（Factory）" class="headerlink" title="工厂模式（Factory）"></a>工厂模式（Factory）</h3><p>创建对象时不会对客户端暴露创建逻辑，并且通过使用一个共同的接口来指向新创建的对象。</p>
<h4 id="意图"><a href="#意图" class="headerlink" title="意图"></a>意图</h4><p>定义一个创建对象的接口，让子类自己决定实例化哪一个工厂类，使创建过程延迟到子类进行。</p>
<h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><p>明确的计划不同条件创建不同实例</p>
<h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h4><p><img src="images/c28481f9-2999-4edd-a99b-afb10a3d0360.png" alt="工厂模式类图"></p>
<h3 id="抽象工厂模式（Abstract-Factory）"><a href="#抽象工厂模式（Abstract-Factory）" class="headerlink" title="抽象工厂模式（Abstract Factory）"></a>抽象工厂模式（Abstract Factory）</h3><h4 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h4><p><img src="images/44ee3844-8f6b-4e33-9ef4-7978b90f83e1.png" alt="抽象工厂类图"></p>
<h3 id="单例模式（Singleton）"><a href="#单例模式（Singleton）" class="headerlink" title="单例模式（Singleton）"></a>单例模式（Singleton）</h3><h4 id="意图-1"><a href="#意图-1" class="headerlink" title="意图"></a>意图</h4><p>保证一个类仅有一个实例，并提供一个访问它的全局访问点。</p>
<h4 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h4><p>一个全局使用的类频繁创建与销毁。</p>
<h4 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h4><ol>
<li>内存里只有一个实例，减少了内存开销</li>
<li>避免对资源的多重占用（比如写文件操作）</li>
</ol>
<h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><p>没有接口，不能继承，<br>与单一职责原则冲突，一个类应该只关心内部逻辑，而不关心外面怎么样来实例化</p>
<h4 id="实现-2"><a href="#实现-2" class="headerlink" title="实现"></a>实现</h4><p><img src="images/5709c5ba-5af1-4193-9fab-de76b37122dc.png" alt="单例模式类图"></p>
<h4 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h4><h5 id="懒汉式，线程不安全（不建议）"><a href="#懒汉式，线程不安全（不建议）" class="headerlink" title="懒汉式，线程不安全（不建议）"></a>懒汉式，线程不安全（不建议）</h5><ul>
<li><strong>是否 Lazy 初始化</strong>：是</li>
<li><strong>是否多线程安全</strong>：否</li>
<li><strong>实现难度</strong>：易</li>
</ul>
<h5 id="懒汉式，线程安全（不建议）"><a href="#懒汉式，线程安全（不建议）" class="headerlink" title="懒汉式，线程安全（不建议）"></a>懒汉式，线程安全（不建议）</h5><ul>
<li><strong>是否 Lazy 初始化</strong>：是</li>
<li><strong>是否多线程安全</strong>：是</li>
<li><strong>实现难度</strong>：易</li>
</ul>
<h5 id="饿汉式（建议）"><a href="#饿汉式（建议）" class="headerlink" title="饿汉式（建议）"></a>饿汉式（建议）</h5><p>基于 classloader 机制避免了多线程的同步问题，</p>
<ul>
<li><strong>是否 Lazy 初始化</strong>：否</li>
<li><strong>是否多线程安全</strong>：是</li>
<li><strong>实现难度</strong>：易</li>
<li><strong>优点</strong>： 没有加锁，执行效率会提高</li>
<li><strong>缺点</strong>： 类加载时就初始化，浪费内存，容易产生垃圾</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="双重校验锁（特殊需求使用）"><a href="#双重校验锁（特殊需求使用）" class="headerlink" title="双重校验锁（特殊需求使用）"></a>双重校验锁（特殊需求使用）</h5><ul>
<li><strong>是否 Lazy 初始化</strong>：是</li>
<li><strong>是否多线程安全</strong>：是</li>
<li><strong>实现难度</strong>：较复杂</li>
<li><strong>优点</strong>： 安全且多线程时高效</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton singleton;  </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;&#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getSingleton</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">		<span class="keyword">if</span> (singleton == <span class="keyword">null</span>) &#123;  </span><br><span class="line">			<span class="keyword">synchronized</span> (Singleton.class) &#123;  </span><br><span class="line">				<span class="keyword">if</span> (singleton == <span class="keyword">null</span>) &#123;  </span><br><span class="line">					singleton = <span class="keyword">new</span> Singleton();  </span><br><span class="line">				&#125;  </span><br><span class="line">			&#125;  </span><br><span class="line">		&#125;  </span><br><span class="line">		<span class="keyword">return</span> singleton;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="静态内部类（明确需要-lazy-loading-时使用）"><a href="#静态内部类（明确需要-lazy-loading-时使用）" class="headerlink" title="静态内部类（明确需要 lazy loading 时使用）"></a>静态内部类（明确需要 lazy loading 时使用）</h5><p>利用 classloader 机制来保证初始化 instance 时只有一个线程，<br>与 饿汉式不同的是： </p>
<ul>
<li>饿汉式只要类被加载，就会是实例化，</li>
<li>这种方式类被加载，不一定被实例化，只有通过显式调用 getInstance，才会装载 SingletonHolder，从而实例化 instance。</li>
</ul>
<p>适用于静态域情况，双重校验方式可在实例域需要延迟初始化时使用</p>
<ul>
<li><strong>是否 Lazy 初始化</strong>：是</li>
<li><strong>是否多线程安全</strong>：是</li>
<li><strong>实现难度</strong>：一般<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton INSTANCE = <span class="keyword">new</span> Singleton();  </span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span> <span class="params">()</span></span>&#123;&#125;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">		<span class="keyword">return</span> SingletonHolder.INSTANCE;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="枚举（涉及反序列化创建对象使用）"><a href="#枚举（涉及反序列化创建对象使用）" class="headerlink" title="枚举（涉及反序列化创建对象使用）"></a>枚举（涉及反序列化创建对象使用）</h5><ul>
<li><strong>是否 Lazy 初始化</strong>：否</li>
<li><strong>是否多线程安全</strong>：是</li>
<li><strong>实现难度</strong>：易</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Singleton</span> </span>&#123;  </span><br><span class="line">    INSTANCE;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">whateverMethod</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="建造者模式（Builder）"><a href="#建造者模式（Builder）" class="headerlink" title="建造者模式（Builder）"></a>建造者模式（Builder）</h3><h3 id="原型模式（Prototype）"><a href="#原型模式（Prototype）" class="headerlink" title="原型模式（Prototype）"></a>原型模式（Prototype）</h3><h2 id="结构型模式"><a href="#结构型模式" class="headerlink" title="结构型模式"></a>结构型模式</h2><p><strong>关注类和对象的组合</strong><br>用于描述如何<strong>将类或对象按某种布局组成更大的结构</strong><br>继承的概念被用来组合接口和定义组合对象获得新功能的方法。</p>
<h3 id="适配器模式（Adapter）"><a href="#适配器模式（Adapter）" class="headerlink" title="适配器模式（Adapter）"></a>适配器模式（Adapter）</h3><h3 id="桥接模式（Bridge）"><a href="#桥接模式（Bridge）" class="headerlink" title="桥接模式（Bridge）"></a>桥接模式（Bridge）</h3><h4 id="意图-2"><a href="#意图-2" class="headerlink" title="意图"></a>意图</h4><p>将抽象部分与实现部分分离，使两者可以独立变化</p>
<h4 id="解决问题-1"><a href="#解决问题-1" class="headerlink" title="解决问题"></a>解决问题</h4><p>有多种可能会变化的情况下，用继承会造成类爆炸问题，扩展不灵活</p>
<h4 id="缺点-2"><a href="#缺点-2" class="headerlink" title="缺点"></a>缺点</h4><p>增加系统理解与设计难度</p>
<h4 id="类图"><a href="#类图" class="headerlink" title="类图"></a>类图</h4><p><img src="images/c28481f9-2999-4edd-a99b-afb10a3d0360.png" alt="桥接模式类图"></p>
<h3 id="过滤器模式（Filter、Criteria-Pattern）"><a href="#过滤器模式（Filter、Criteria-Pattern）" class="headerlink" title="过滤器模式（Filter、Criteria Pattern）"></a>过滤器模式（Filter、Criteria Pattern）</h3><p>允许使用不同标准来过滤一组对象，通过逻辑运算以解耦的方式把它们连接起来。<br>结合多个标准来获得单一标准。</p>
<h4 id="类图-1"><a href="#类图-1" class="headerlink" title="类图"></a>类图</h4><p><img src="images/a7612448-e8a0-4fbf-b8d3-098178b4ee08.png" alt="过滤器模式类图"></p>
<h3 id="组合模式（Composite）"><a href="#组合模式（Composite）" class="headerlink" title="组合模式（Composite）"></a>组合模式（Composite）</h3><h3 id="装饰器模式（Decorator）"><a href="#装饰器模式（Decorator）" class="headerlink" title="装饰器模式（Decorator）"></a>装饰器模式（Decorator）</h3><h3 id="外观模式（Facade）"><a href="#外观模式（Facade）" class="headerlink" title="外观模式（Facade）"></a>外观模式（Facade）</h3><h3 id="享元模式（Flyweight）"><a href="#享元模式（Flyweight）" class="headerlink" title="享元模式（Flyweight）"></a>享元模式（Flyweight）</h3><h3 id="代理模式（Proxy）"><a href="#代理模式（Proxy）" class="headerlink" title="代理模式（Proxy）"></a>代理模式（Proxy）</h3><h2 id="行为型模式"><a href="#行为型模式" class="headerlink" title="行为型模式"></a>行为型模式</h2><p><strong>关注对象间的通信</strong><br>用于描述类或对象间怎样相互协作共同完成单个对象无法单独完成的任务，以及怎样分配职责。</p>
<h3 id="责任链模式（Chain-of-Responsibility）"><a href="#责任链模式（Chain-of-Responsibility）" class="headerlink" title="责任链模式（Chain of Responsibility）"></a>责任链模式（Chain of Responsibility）</h3><h4 id="类图-2"><a href="#类图-2" class="headerlink" title="类图"></a>类图</h4><p><img src="images/bf41771a-0df1-4659-9251-2881054df580.png" alt="责任链模式类图"></p>
<h3 id="命令模式（Command）"><a href="#命令模式（Command）" class="headerlink" title="命令模式（Command）"></a>命令模式（Command）</h3><h3 id="解释器模式（Interpreter）"><a href="#解释器模式（Interpreter）" class="headerlink" title="解释器模式（Interpreter）"></a>解释器模式（Interpreter）</h3><h3 id="迭代子模式（Iterator）"><a href="#迭代子模式（Iterator）" class="headerlink" title="迭代子模式（Iterator）"></a>迭代子模式（Iterator）</h3><h3 id="中介者模式（Mediator）"><a href="#中介者模式（Mediator）" class="headerlink" title="中介者模式（Mediator）"></a>中介者模式（Mediator）</h3><h3 id="备忘录模式（Memento）"><a href="#备忘录模式（Memento）" class="headerlink" title="备忘录模式（Memento）"></a>备忘录模式（Memento）</h3><h3 id="观察者模式（Observer）"><a href="#观察者模式（Observer）" class="headerlink" title="观察者模式（Observer）"></a>观察者模式（Observer）</h3><h3 id="状态模式（State）"><a href="#状态模式（State）" class="headerlink" title="状态模式（State）"></a>状态模式（State）</h3><p>解决系统中复杂对象的状态转换以及不同状态下行为的封装问题</p>
<p>将一个对象的状态从对象中分离出来，封装到专门的状态类中<br>对于客户端而言，无需关心对象状态的转换及对象所处的当前状态</p>
<h4 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h4><p>允许一个对象在其内部状态改变时改变它的行为，对象看起来似乎修改了它的类。</p>
<h4 id="结构图-1"><a href="#结构图-1" class="headerlink" title="结构图"></a>结构图</h4><p><img src="images/df91e55e-3457-4eac-8a82-fb329fea2265.png" alt="状态模式类图"></p>
<p><strong>Context（上下文）</strong>： 拥有多种状态的对象，维护一个抽象状态类 State 的引用，通过 setState() 方法可以注入不同的状态对象。<br><strong>State（抽象状态类）</strong>： 定义一个接口以封装与上下文的一个特定状态相关的行为，声明了各种不同状态对应的方法，子类中需要实现这些方法，相同的方法可以在抽象状态类中实现。<br><strong>ConcreteState（具体状态类）</strong>： 抽象状态类的子类，每个子类实现一种状态的相应行为。</p>
<h4 id="实例-1（使用具体状态类实现状态转换）"><a href="#实例-1（使用具体状态类实现状态转换）" class="headerlink" title="实例 1（使用具体状态类实现状态转换）"></a>实例 1（使用具体状态类实现状态转换）</h4><p><img src="images/4ad1e38a-17a7-468b-9ca0-f0077ba475a1.png" alt="状态模式实例1"></p>
<ul>
<li>Account充当环境类角色，</li>
<li>AccountState充当抽象状态角色，</li>
<li>NormalState、OverdraftState和RestrictedState充当具体状态角色</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//银行账户：环境类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Account</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> AccountState state; <span class="comment">//维持一个对抽象状态对象的引用</span></span><br><span class="line">	<span class="keyword">private</span> String owner; <span class="comment">//开户名</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> balance = <span class="number">0</span>; <span class="comment">//账户余额</span></span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Account</span><span class="params">(String owner,<span class="keyword">double</span> init)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.owner = owner;</span><br><span class="line">		<span class="keyword">this</span>.balance = balance;</span><br><span class="line">		<span class="keyword">this</span>.state = <span class="keyword">new</span> NormalState(<span class="keyword">this</span>); <span class="comment">//设置初始状态</span></span><br><span class="line">		System.out.println(<span class="keyword">this</span>.owner + <span class="string">&quot;开户，初始金额为&quot;</span> + init);	</span><br><span class="line">		System.out.println(<span class="string">&quot;---------------------------------------------&quot;</span>);	</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deposit</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="keyword">this</span>.owner + <span class="string">&quot;存款&quot;</span> + amount);</span><br><span class="line">		state.deposit(amount); <span class="comment">//调用状态对象的deposit()方法</span></span><br><span class="line">		System.out.println(<span class="string">&quot;现在余额为&quot;</span>+ <span class="keyword">this</span>.balance);</span><br><span class="line">		System.out.println(<span class="string">&quot;现在帐户状态为&quot;</span>+ <span class="keyword">this</span>.state.getClass().getName());</span><br><span class="line">		System.out.println(<span class="string">&quot;---------------------------------------------&quot;</span>);			</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">withdraw</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="keyword">this</span>.owner + <span class="string">&quot;取款&quot;</span> + amount);</span><br><span class="line">        state.withdraw(amount); <span class="comment">//调用状态对象的withdraw()方法</span></span><br><span class="line">		System.out.println(<span class="string">&quot;现在余额为&quot;</span>+ <span class="keyword">this</span>.balance);</span><br><span class="line">		System.out.println(<span class="string">&quot;现在帐户状态为&quot;</span>+ <span class="keyword">this</span>. state.getClass().getName());		</span><br><span class="line">		System.out.println(<span class="string">&quot;---------------------------------------------&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeInterest</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		state.computeInterest(); <span class="comment">//调用状态对象的computeInterest()方法</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//抽象状态类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AccountState</span> </span>&#123;</span><br><span class="line">	<span class="keyword">protected</span> Account acc;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">deposit</span><span class="params">(<span class="keyword">double</span> amount)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">withdraw</span><span class="params">(<span class="keyword">double</span> amount)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">computeInterest</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">stateCheck</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//正常状态：具体状态类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NormalState</span> <span class="keyword">extends</span> <span class="title">AccountState</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">NormalState</span><span class="params">(Account acc)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.acc = acc;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">NormalState</span><span class="params">(AccountState state)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.acc = state.acc;</span><br><span class="line">	&#125;</span><br><span class="line">		</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deposit</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() + amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">withdraw</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() - amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeInterest</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;正常状态，无须支付利息！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//状态转换</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stateCheck</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (acc.getBalance() &gt; -<span class="number">2000</span> &amp;&amp; acc.getBalance() &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> OverdraftState(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (acc.getBalance() == -<span class="number">2000</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> RestrictedState(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (acc.getBalance() &lt; -<span class="number">2000</span>) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;操作受限！&quot;</span>);</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;   </span><br><span class="line">&#125;  </span><br><span class="line"> </span><br><span class="line"><span class="comment">//透支状态：具体状态类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OverdraftState</span> <span class="keyword">extends</span> <span class="title">AccountState</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">OverdraftState</span><span class="params">(AccountState state)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.acc = state.acc;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deposit</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() + amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">withdraw</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() - amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeInterest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;计算利息！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//状态转换</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stateCheck</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (acc.getBalance() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> NormalState(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (acc.getBalance() == -<span class="number">2000</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> RestrictedState(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (acc.getBalance() &lt; -<span class="number">2000</span>) &#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;操作受限！&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//受限状态：具体状态类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RestrictedState</span> <span class="keyword">extends</span> <span class="title">AccountState</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">RestrictedState</span><span class="params">(AccountState state)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.acc = state.acc;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deposit</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		acc.setBalance(acc.getBalance() + amount);</span><br><span class="line">		stateCheck();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">withdraw</span><span class="params">(<span class="keyword">double</span> amount)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;帐号受限，取款失败&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeInterest</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;计算利息！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//状态转换</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stateCheck</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(acc.getBalance() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> NormalState(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(acc.getBalance() &gt; -<span class="number">2000</span>) &#123;</span><br><span class="line">			acc.setState(<span class="keyword">new</span> OverdraftState(<span class="keyword">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 客户端</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		Account acc = <span class="keyword">new</span> Account(<span class="string">&quot;段誉&quot;</span>,<span class="number">0.0</span>);</span><br><span class="line">		acc.deposit(<span class="number">1000</span>);</span><br><span class="line">		acc.withdraw(<span class="number">2000</span>);</span><br><span class="line">		acc.deposit(<span class="number">3000</span>);</span><br><span class="line">		acc.withdraw(<span class="number">4000</span>);</span><br><span class="line">		acc.withdraw(<span class="number">1000</span>);</span><br><span class="line">		acc.computeInterest();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="实现-2（使用环境类实现状态切换）"><a href="#实现-2（使用环境类实现状态切换）" class="headerlink" title="实现 2（使用环境类实现状态切换）"></a>实现 2（使用环境类实现状态切换）</h4><p><img src="images/f751cedd-2e20-4adc-9149-d4f38eb277df.png" alt="状态模式实例2"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//屏幕类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Screen</span> </span>&#123;</span><br><span class="line">    <span class="comment">//枚举所有的状态，currentState表示当前状态</span></span><br><span class="line">	<span class="keyword">private</span> State currentState, normalState, largerState, largestState;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Screen</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">this</span>.normalState = <span class="keyword">new</span> NormalState(); <span class="comment">//创建正常状态对象</span></span><br><span class="line">    	<span class="keyword">this</span>.largerState = <span class="keyword">new</span> LargerState(); <span class="comment">//创建二倍放大状态对象</span></span><br><span class="line">    	<span class="keyword">this</span>.largestState = <span class="keyword">new</span> LargestState(); <span class="comment">//创建四倍放大状态对象</span></span><br><span class="line">		</span><br><span class="line">    	<span class="keyword">this</span>.currentState = normalState; <span class="comment">//设置初始状态</span></span><br><span class="line">    	<span class="keyword">this</span>.currentState.display();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setState</span><span class="params">(State state)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.currentState = state;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//单击事件处理方法，封转了对状态类中业务方法的调用和状态的转换</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">if</span> (<span class="keyword">this</span>.currentState == normalState) &#123;</span><br><span class="line">    		<span class="keyword">this</span>.setState(largerState);</span><br><span class="line">    		<span class="keyword">this</span>.currentState.display();</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.currentState == largerState) &#123;</span><br><span class="line">    		<span class="keyword">this</span>.setState(largestState);</span><br><span class="line">    		<span class="keyword">this</span>.currentState.display();</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">this</span>.currentState == largestState) &#123;</span><br><span class="line">    		<span class="keyword">this</span>.setState(normalState);</span><br><span class="line">    		<span class="keyword">this</span>.currentState.display();</span><br><span class="line">    	&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//抽象状态类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">State</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//正常状态类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NormalState</span> <span class="keyword">extends</span> <span class="title">State</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;正常大小！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//二倍状态类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LargerState</span> <span class="keyword">extends</span> <span class="title">State</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;二倍大小！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//四倍状态类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LargestState</span> <span class="keyword">extends</span> <span class="title">State</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;四倍大小！&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		Screen screen = <span class="keyword">new</span> Screen();</span><br><span class="line">		screen.onClick();</span><br><span class="line">		screen.onClick();</span><br><span class="line">		screen.onClick();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="优点-2"><a href="#优点-2" class="headerlink" title="优点"></a>优点</h4><ol>
<li>封装了状态转换规则，对状态转换进行集中管理</li>
<li>将所有与某个状态的行为放到一个类中，只需注入一个不同状态对象就可实现不同行为</li>
<li>避免使用庞大的条件判断</li>
<li>可以共享一个状态对象，减少系统中对象个数</li>
</ol>
<h4 id="缺点-3"><a href="#缺点-3" class="headerlink" title="缺点"></a>缺点</h4><ol>
<li>对开闭原则支持不好，增加状态需要修改状态转换代码，修改某个状态需要修改对应类。</li>
<li>使用不当会导致程序结构和代码混乱</li>
</ol>
<h4 id="适用场景-1"><a href="#适用场景-1" class="headerlink" title="适用场景"></a>适用场景</h4><ol>
<li>对象的行为依赖它的状态，状态的改变会导致行为的变化</li>
<li>包含大量对象状态有关的条件判断，增加或删除状态不方便，耦合性太高。</li>
</ol>
<h3 id="空对象模式（Null-Object-Pattern）"><a href="#空对象模式（Null-Object-Pattern）" class="headerlink" title="空对象模式（Null Object Pattern）"></a>空对象模式（Null Object Pattern）</h3><h3 id="策略模式（Strategy）"><a href="#策略模式（Strategy）" class="headerlink" title="策略模式（Strategy）"></a>策略模式（Strategy）</h3><p><strong>将算法的定义和使用分离</strong>，一种可插入式(Pluggable)算法的实现方案<br>灵活的选择解决途径，可以方便增加新的解决途径</p>
<h4 id="定义-2"><a href="#定义-2" class="headerlink" title="定义"></a>定义</h4><p>定义一系列算法类，将每个算法封装起来，让他们可以相互替换，让算法独立于使用他的客户而变化。</p>
<p>每一个类封装一种具体算法，每一个类是一种策略，<br>使用一个抽象策略来做规则定义。</p>
<h4 id="结构图-2"><a href="#结构图-2" class="headerlink" title="结构图"></a>结构图</h4><p><img src="images/df91e55e-3457-4eac-8a82-fb329fea2265.png" alt="策略模式类图"><br>客户类 Context 中建立一个抽象策略类的引用，<br>通过注入的方式在客户端传入一个具体策略对象，<br>也可通过反射动态创建具体策略对象</p>
<h4 id="实例-1"><a href="#实例-1" class="headerlink" title="实例 1"></a>实例 1</h4><p><img src="images/1db8517a-af91-4f96-b913-afa6e06fe3ce.png" alt="策略模式实例1"><br>MovieTicket充当环境类角色，<br>Discount充当抽象策略角色，<br>StudentDiscount、 ChildrenDiscount 和VIPDiscount充当具体策略角色</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//电影票类：环境类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MovieTicket</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> price;</span><br><span class="line">	<span class="keyword">private</span> Discount discount; <span class="comment">//维持一个对抽象折扣类的引用</span></span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(<span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.price = price;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//注入一个折扣类对象</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDiscount</span><span class="params">(Discount discount)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.discount = discount;</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//调用折扣类的折扣价计算方法</span></span><br><span class="line">		<span class="keyword">return</span> discount.calculate(<span class="keyword">this</span>.price);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//折扣类：抽象策略类</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Discount</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> price)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//学生票折扣类：具体策略类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentDiscount</span> <span class="keyword">implements</span> <span class="title">Discount</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;学生票：&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> price * <span class="number">0.8</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="comment">//儿童票折扣类：具体策略类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChildrenDiscount</span> <span class="keyword">implements</span> <span class="title">Discount</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;儿童票：&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> price - <span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="comment">//VIP会员票折扣类：具体策略类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VIPDiscount</span> <span class="keyword">implements</span> <span class="title">Discount</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">calculate</span><span class="params">(<span class="keyword">double</span> price)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">&quot;VIP票：&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;增加积分！&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span> price * <span class="number">0.5</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.xml.parsers.*;</span><br><span class="line"><span class="keyword">import</span> org.w3c.dom.*;</span><br><span class="line"><span class="keyword">import</span> org.xml.sax.SAXException;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XMLUtil</span> </span>&#123;</span><br><span class="line"><span class="comment">//该方法用于从XML配置文件中提取具体类类名，并返回一个实例对象</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			<span class="comment">//创建文档对象</span></span><br><span class="line">			DocumentBuilderFactory dFactory = DocumentBuilderFactory.newInstance();</span><br><span class="line">			DocumentBuilder builder = dFactory.newDocumentBuilder();</span><br><span class="line">			Document doc;							</span><br><span class="line">			doc = builder.parse(<span class="keyword">new</span> File(<span class="string">&quot;config.xml&quot;</span>)); </span><br><span class="line">		</span><br><span class="line">			<span class="comment">//获取包含类名的文本节点</span></span><br><span class="line">			NodeList nl = doc.getElementsByTagName(<span class="string">&quot;className&quot;</span>);</span><br><span class="line">            Node classNode=nl.item(<span class="number">0</span>).getFirstChild();</span><br><span class="line">            String cName=classNode.getNodeValue();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//通过类名生成实例对象并将其返回</span></span><br><span class="line">            Class c=Class.forName(cName);</span><br><span class="line">	  	    Object obj=c.newInstance();</span><br><span class="line">            <span class="keyword">return</span> obj;</span><br><span class="line">        &#125;   </span><br><span class="line">        <span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">           	e.printStackTrace();</span><br><span class="line">           	<span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">       	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">className</span>&gt;</span>StudentDiscount<span class="tag">&lt;/<span class="name">className</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> </span>&#123;</span><br><span class="line">		MovieTicket mt = <span class="keyword">new</span> MovieTicket();</span><br><span class="line">		<span class="keyword">double</span> originalPrice = <span class="number">60.0</span>;</span><br><span class="line">		<span class="keyword">double</span> currentPrice;</span><br><span class="line">		</span><br><span class="line">		mt.setPrice(originalPrice);</span><br><span class="line">		System.out.println(<span class="string">&quot;原始价为：&quot;</span> + originalPrice);</span><br><span class="line">		System.out.println(<span class="string">&quot;---------------------------------&quot;</span>);</span><br><span class="line">			</span><br><span class="line">		Discount discount;</span><br><span class="line">		discount = (Discount)XMLUtil.getBean(); <span class="comment">//读取配置文件并反射生成具体折扣对象</span></span><br><span class="line">		mt.setDiscount(discount); <span class="comment">//注入折扣对象</span></span><br><span class="line">		</span><br><span class="line">		currentPrice = mt.getPrice();</span><br><span class="line">		System.out.println(<span class="string">&quot;折后价为：&quot;</span> + currentPrice);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="实例-2"><a href="#实例-2" class="headerlink" title="实例 2"></a>实例 2</h4><p><img src="images/f5fa9f5d-858b-4fb7-9166-32630362336f.png" alt="策略模式实例2"><br>Container类充当环境角色Context，<br>LayoutManager作为所有布局类的公共父类扮演了抽象策略角色，它给出所有具体布局类所需的接口，<br>具体策略类是LayoutManager的子类，也就是各种具体的布局类，它们封装了不同的布局方式。<br>也可以设计并实现自己的布局类，只需要将自己设计的布局类作为LayoutManager的子类就可以</p>
<h4 id="优点-3"><a href="#优点-3" class="headerlink" title="优点"></a>优点</h4><ol>
<li><strong>完美支持开闭原则</strong>，可以在不修改原有系统的基础上选择算法或行为，也可以灵活地增加新的算法或行为</li>
<li>提供一种可替换继承关系的方法，<ol>
<li>避免使用继承时算法与算法本身混在一起，不符合单一职责原则</li>
<li>避免使用继承时无法实现算法或行为运行时动态切换。</li>
</ol>
</li>
<li>避免多重条件选择语句</li>
</ol>
<h4 id="缺点-4"><a href="#缺点-4" class="headerlink" title="缺点"></a>缺点</h4><ol>
<li>客户端需要知道所有策略类，并自定决定使用哪一个策略。</li>
<li>会产生很多具体策略类，任何细小变化都需要增加一个新的具体策略类</li>
<li>无法同时使用多个策略类</li>
</ol>
<h4 id="使用场景-1"><a href="#使用场景-1" class="headerlink" title="使用场景"></a>使用场景</h4><ol>
<li>需要动态在几种算法中选择一种，可以将这些算法封装到一个个具体算法类中，这些算法类都是一个抽象算法类的子类。客户端可以选择任何一个具体算法类，并只需要维持一个抽象算法类的实例。</li>
<li>一个对象有很多行为，可以把这些行为转移到相应的具体策略里，避免难以维护的多重条件选择语句。</li>
<li>不希望客户端知道复杂的、与算法相关的数据结构</li>
</ol>
<h3 id="模板方法模式（Template-Method）"><a href="#模板方法模式（Template-Method）" class="headerlink" title="模板方法模式（Template Method）"></a>模板方法模式（Template Method）</h3><p>一种基于继承的代码复用技术</p>
<h4 id="定义-3"><a href="#定义-3" class="headerlink" title="定义"></a>定义</h4><p>定义一个操作中算法的框架，将一些步骤延迟到子类中。<br>模板方法模式使得子类可以不改变一个算法的结构，即可重定义该算法的某些特定步骤。</p>
<p>某个方法实现需要多个步骤，其中<strong>有些步骤固定</strong>，而<strong>有些步骤不固定</strong>，存在可变性。</p>
<blockquote>
<p><strong>模板方法</strong>： 调用基本方法同时定义基本方法执行次序的方法<br><strong>基本方法</strong>： 实现功能的每个步骤对应的方法</p>
</blockquote>
<p>在模板方法模式中，由于面向对象的多态性，子类对象在运行时将覆盖父类对象，子类中定义的方法也将覆盖父类中定义的方法，<br>因此程序在运行时，具体子类的基本方法将覆盖父类中定义的基本方法，子类的钩子方法也将覆盖父类的钩子方法，从而可以通过在子类中实现的钩子方法对父类方法的执行进行约束，实现子类对父类行为的反向控制</p>
<h4 id="结构图-3"><a href="#结构图-3" class="headerlink" title="结构图"></a>结构图</h4><p><img src="images/e1ee8b0a-0a19-4f95-8b53-20ead9fac507.png" alt="模板方法类图"><br>在抽象类中，模板方法 TemplateMethod() 定义了算法的框架，<br>在模板方法中调用基本方法以实现完整的算法，每一个基本方法如 PrimitiveOperation1()、PrimitiveOperation2() 等均实现了算法的一部分，<br>对于所有子类都相同的基本方法可在父类提供具体实现，例如 PrimitiveOperation1()，<br>否则在父类声明为抽象方法或钩子方法，由不同的子类提供不同的实现，例如 PrimitiveOperation2() 和 PrimitiveOperation3()。</p>
<h4 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h4><p>模板方法、固定步骤的基本方法放在父类<br>不固定步骤的基本方法声明在父类，实现在单独的子类<br>运行时选择一种具体子类</p>
<h5 id="模板方法"><a href="#模板方法" class="headerlink" title="模板方法"></a>模板方法</h5><p>定义在抽象类中<br>组合基本方法</p>
<h5 id="基本方法"><a href="#基本方法" class="headerlink" title="基本方法"></a>基本方法</h5><p>实现各个步骤的方法，是模板方法的组成部分</p>
<ol>
<li>抽象方法<br> 由抽象类声明、具体子类实现</li>
<li>具体方法<br> 由一个抽象类或具体类声明并实现，子类可以覆盖也可以直接继承</li>
<li>钩子方法<br> 由一个抽象类或具体类声明并实现，父类给出一个默认空实现（或非空实现）</li>
</ol>
<h4 id="优点-4"><a href="#优点-4" class="headerlink" title="优点"></a>优点</h4><ol>
<li>符合单一职责和开闭原则，不同子类可以提供不同实现，方便更换和增加新的子类</li>
<li>子类实现时不会改变父类中的执行顺序</li>
<li>可以实现一种反向控制结构，子类覆盖父类的钩子方法来决定某一特定步骤是否需要执行</li>
</ol>
<h4 id="缺点-5"><a href="#缺点-5" class="headerlink" title="缺点"></a>缺点</h4><ol>
<li>需要为每个基本方法不同实现提供一个子类，如果父类可变的方法太多，会导致类的个数增加，使得系统庞大，设计更抽象，这种情况<strong>可以结合桥接模式</strong>进行设计。</li>
</ol>
<h4 id="适用场景-2"><a href="#适用场景-2" class="headerlink" title="适用场景"></a>适用场景</h4><ol>
<li>对一些复杂算法进行分割，一次性实现一个算法的不变部分，并将可变的行为留给子类来实现<ol>
<li>将算法中固定不变部分设计为模板方法和父类具体方法，</li>
<li>将可以改变的细节有子类来实现</li>
</ol>
</li>
<li>需要提取子类公共行为集中到公共父类避免代码重复</li>
<li>需要通过子类来决定父类算法中某个步骤是否执行，实现对父类反向控制</li>
</ol>
<h3 id="访问者模式（Visitor）"><a href="#访问者模式（Visitor）" class="headerlink" title="访问者模式（Visitor）"></a>访问者模式（Visitor）</h3><p>为不同类型的元素提供多种访问操作方式，而且可以在不修改原有系统的情况下增加新的操作方式。</p>
<h4 id="定义-4"><a href="#定义-4" class="headerlink" title="定义"></a>定义</h4><p>提供一个作用于某对象结构中的各元素的操作表示，它使我们可以在不改变各元素的类的前提下定义作用于这些元素的新操作。</p>
<h4 id="结构图-4"><a href="#结构图-4" class="headerlink" title="结构图"></a>结构图</h4><p><img src="images/085cbffc-d205-4715-a125-67d6a6d2f17f.png" alt="访问者模式类图"><br><strong>Vistor（抽象访问者）</strong>： 为每个具体元素类声明一个访问操作，具体访问者需要实现这些操作方法。<br><strong>ConcreteVisitor（具体访问者）</strong>：实现每个由访问者声明的操作，每个操作作用于访问对象结构中一种类型的元素。<br><strong>Element（抽象元素）</strong>：抽象类或接口，通常以一个抽象访问者为参数。<br><strong>ConcreteElement（具体元素）</strong>：在实现方法中调用访问者的访问方法完成对一个元素的操作<br><strong>ObjectStructure（对象结构）</strong>：元素的集合，存放元素对象，并提供遍历元素方法。可以结合组合模式实现或一个简单的集合对象。</p>
<h4 id="实例-1-1"><a href="#实例-1-1" class="headerlink" title="实例 1"></a>实例 1</h4><p><img src="images/79faf93d-2624-45d7-8788-e48e33bad712.png" alt="访问者模式实例1"></p>
<p>Department充当抽象访问者角色<br>FADepartment表示财务部，<br>HRDepartment表示人力资源部，它们充当具体访问者角色，<br>Employee充当抽象元素角色<br>EmployeeList充当对象结构，用于存储员工列表；<br>FulltimeEmployee表示正式员工，<br>ParttimeEmployee表示临时工，它们充当具体元素角色</p>
<table>
<thead>
<tr>
<th></th>
<th>全职员工</th>
<th>临时工</th>
</tr>
</thead>
<tbody><tr>
<td>财务部</td>
<td></td>
<td></td>
</tr>
<tr>
<td>人力资源部</td>
<td></td>
<td></td>
</tr>
<tr>
<td>新的访问者……</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//员工类：抽象元素类</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Department handler)</span></span>; <span class="comment">//接受一个抽象访问者访问</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//全职员工类：具体元素类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FulltimeEmployee</span> <span class="keyword">implements</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> weeklyWage;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> workTime;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">FulltimeEmployee</span><span class="params">(String name,<span class="keyword">double</span> weeklyWage,<span class="keyword">int</span> workTime)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.weeklyWage = weeklyWage;</span><br><span class="line">		<span class="keyword">this</span>.workTime = workTime;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//兼职员工类：具体元素类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ParttimeEmployee</span> <span class="keyword">implements</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> hourWage;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> workTime;</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ParttimeEmployee</span><span class="params">(String name,<span class="keyword">double</span> hourWage,<span class="keyword">int</span> workTime)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.hourWage = hourWage;</span><br><span class="line">		<span class="keyword">this</span>.workTime = workTime;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//部门类：抽象访问者类</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Department</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//声明一组重载的访问方法，用于访问不同类型的具体元素</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(FulltimeEmployee employee)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(ParttimeEmployee employee)</span></span>;	</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//财务部类：具体访问者类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FADepartment</span> <span class="keyword">extends</span> <span class="title">Department</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//实现财务部对全职员工的访问</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(FulltimeEmployee employee)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> workTime = employee.getWorkTime();</span><br><span class="line">		<span class="keyword">double</span> weekWage = employee.getWeeklyWage();</span><br><span class="line">		<span class="keyword">if</span>(workTime &gt; <span class="number">40</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			weekWage = weekWage + (workTime - <span class="number">40</span>) * <span class="number">100</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(workTime &lt; <span class="number">40</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			weekWage = weekWage - (<span class="number">40</span> - workTime) * <span class="number">80</span>;</span><br><span class="line">			<span class="keyword">if</span>(weekWage &lt; <span class="number">0</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				weekWage = <span class="number">0</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">&quot;正式员工&quot;</span> + employee.getName() + <span class="string">&quot;实际工资为：&quot;</span> + weekWage + <span class="string">&quot;元。&quot;</span>);			</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//实现财务部对兼职员工的访问</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(ParttimeEmployee employee)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> workTime = employee.getWorkTime();</span><br><span class="line">		<span class="keyword">double</span> hourWage = employee.getHourWage();</span><br><span class="line">		System.out.println(<span class="string">&quot;临时工&quot;</span> + employee.getName() + <span class="string">&quot;实际工资为：&quot;</span> + workTime * hourWage + <span class="string">&quot;元。&quot;</span>);		</span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//人力资源部类：具体访问者类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HRDepartment</span> <span class="keyword">extends</span> <span class="title">Department</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//实现人力资源部对全职员工的访问</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(FulltimeEmployee employee)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> workTime = employee.getWorkTime();</span><br><span class="line">		System.out.println(<span class="string">&quot;正式员工&quot;</span> + employee.getName() + <span class="string">&quot;实际工作时间为：&quot;</span> + workTime + <span class="string">&quot;小时。&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span>(workTime &gt; <span class="number">40</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;正式员工&quot;</span> + employee.getName() + <span class="string">&quot;加班时间为：&quot;</span> + (workTime - <span class="number">40</span>) + <span class="string">&quot;小时。&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(workTime &lt; <span class="number">40</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			System.out.println(<span class="string">&quot;正式员工&quot;</span> + employee.getName() + <span class="string">&quot;请假时间为：&quot;</span> + (<span class="number">40</span> - workTime) + <span class="string">&quot;小时。&quot;</span>);</span><br><span class="line">		&#125;						</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//实现人力资源部对兼职员工的访问</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(ParttimeEmployee employee)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">int</span> workTime = employee.getWorkTime();</span><br><span class="line">		System.out.println(<span class="string">&quot;临时工&quot;</span> + employee.getName() + <span class="string">&quot;实际工作时间为：&quot;</span> + workTime + <span class="string">&quot;小时。&quot;</span>);</span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//员工列表类：对象结构</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EmployeeList</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">//定义一个集合用于存储员工对象</span></span><br><span class="line">	<span class="keyword">private</span> ArrayList&lt;Employee&gt; list = <span class="keyword">new</span> ArrayList&lt;Employee&gt;();</span><br><span class="line"> </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addEmployee</span><span class="params">(Employee employee)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		list.add(employee);</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">//遍历访问员工集合中的每一个员工对象</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Department handler)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(Object obj : list)</span><br><span class="line">		&#123;</span><br><span class="line">			((Employee)obj).accept(handler);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		EmployeeList list = <span class="keyword">new</span> EmployeeList();</span><br><span class="line">		Employee fte1,fte2,fte3,pte1,pte2;</span><br><span class="line"> </span><br><span class="line">		fte1 = <span class="keyword">new</span> FulltimeEmployee(<span class="string">&quot;张无忌&quot;</span>,<span class="number">3200.00</span>,<span class="number">45</span>);</span><br><span class="line">		fte2 = <span class="keyword">new</span> FulltimeEmployee(<span class="string">&quot;杨过&quot;</span>,<span class="number">2000.00</span>,<span class="number">40</span>);</span><br><span class="line">		fte3 = <span class="keyword">new</span> FulltimeEmployee(<span class="string">&quot;段誉&quot;</span>,<span class="number">2400.00</span>,<span class="number">38</span>);</span><br><span class="line">		pte1 = <span class="keyword">new</span> ParttimeEmployee(<span class="string">&quot;洪七公&quot;</span>,<span class="number">80.00</span>,<span class="number">20</span>);</span><br><span class="line">		pte2 = <span class="keyword">new</span> ParttimeEmployee(<span class="string">&quot;郭靖&quot;</span>,<span class="number">60.00</span>,<span class="number">18</span>);</span><br><span class="line"> </span><br><span class="line">		list.addEmployee(fte1);</span><br><span class="line">		list.addEmployee(fte2);</span><br><span class="line">		list.addEmployee(fte3);</span><br><span class="line">		list.addEmployee(pte1);</span><br><span class="line">		list.addEmployee(pte2);</span><br><span class="line"> </span><br><span class="line">		Department dep;</span><br><span class="line">		dep = (Department)XMLUtil.getBean();</span><br><span class="line">		list.accept(dep);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="优点-5"><a href="#优点-5" class="headerlink" title="优点"></a>优点</h4><ol>
<li>方便增加新的访问者，符合开闭原则</li>
<li>集中有关元素对象的访问行为到一个访问者对象中</li>
</ol>
<h4 id="缺点-6"><a href="#缺点-6" class="headerlink" title="缺点"></a>缺点</h4><ol>
<li>增加新的元素类很困难，违背开闭原则，<strong>每增加一个新的元素都要在抽象访问者类中增加一个新的抽象方法，并在每一个具体访问者类中增加相应的具体操作</strong></li>
<li>破坏封装，元素对象会暴露一些内部操作和状态</li>
</ol>
<h4 id="适用场景-3"><a href="#适用场景-3" class="headerlink" title="适用场景"></a>适用场景</h4><ol>
<li>一个对象机构包含多个类型的对象，需要对这些对象实施依赖具体类型的操作。针对每一种具体的类型提供一个访问操作，不同类型的对象可以有不同的访问操作。</li>
<li>需要对一个对象结构中的对象进行不同且不相关的操作，避免污染对象的类，增加新操作时不需要修改这些类。</li>
<li>对象对应的类很少改变，但经常需要在此对象结构上定义新的操作。</li>
</ol>

        
    </div>
    </div>

    <div class="article-badge">
        
        
    </div>

</div>

<footer class="article-footer">
    <div class="article-more-info">
    <div class="article-date">
  <time datetime="2021-04-25T06:16:42.115Z" itemprop="datePublished">2021-04-25</time>
</div>
    
        <div class="article-category">
        <a class="article-category-link" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a>
        </div>
    
    
        <div class="article-tag">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li></ul>
        </div>
    
    </div>
</footer>

</article>

    
  
    
      <article
id="post-MySQL/MySQL 语句执行顺序"
class="article article-type-post"
>



<div class="article-inner">
    

    <div class="article-body">
    <header class="article-title">
        <a href="/MySQL/MySQL%20%E8%AF%AD%E5%8F%A5%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F/">MySQL 语句执行顺序</a>
    </header>
    <div class="article-entry post-inner-html">
        
        <h2 id="MySQL-语句执行顺序"><a href="#MySQL-语句执行顺序" class="headerlink" title="MySQL 语句执行顺序"></a>MySQL 语句执行顺序</h2><p>MySQL的语句一共分为11步，如下图所标注的那样，</p>
<p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-606424f2e95442eaadaf2189b5d90552.png"></p>
<blockquote>
<p>最先执行的总是 <code>FROM</code> 操作，最后执行的是 <code>LIMIT</code> 操作。</p>
</blockquote>
<p>其中每一个操作都会产生一张虚拟的表，这个虚拟的表作为一个处理的输入，只是这些虚拟的表对用户来说是透明的，但是只有最后一个虚拟的表才会被作为结果返回。</p>
<p>如果没有在语句中指定某一个子句，那么将会跳过相应的步骤。</p>
<p>下面我们来具体分析一下查询处理的每一个阶段</p>
<table>
<thead>
<tr>
<th>顺序</th>
<th>名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>FORM</td>
<td>对FROM的左边的表和右边的表计算笛卡尔积。产生虚表VT1</td>
</tr>
<tr>
<td>2</td>
<td>ON</td>
<td>对虚表VT1进行ON筛选，只有那些符合的行才会被记录在虚表VT2中。</td>
</tr>
<tr>
<td>3</td>
<td>JOIN</td>
<td>如果指定了OUTER JOIN（比如left join、 right join），那么保留表中未匹配的行就会作为外部行添加到虚拟表VT2中，产生虚拟表VT3, rug from子句中包含两个以上的表的话，那么就会对上一个join连接产生的结果VT3和下一个表重复执行步骤1~3这三个步骤，一直到处理完所有的表为止。</td>
</tr>
<tr>
<td>4</td>
<td>WHERE</td>
<td>对虚拟表VT3进行WHERE条件过滤。只有符合的记录才会被插入到虚拟表VT4中。</td>
</tr>
<tr>
<td>5</td>
<td>GROUP BY</td>
<td>根据group by子句中的列，对VT4中的记录进行分组操作，产生VT5.</td>
</tr>
<tr>
<td>6</td>
<td>CUBE / ROLLUP</td>
<td>对表VT5进行cube或者rollup操作，产生表VT6.</td>
</tr>
<tr>
<td>7</td>
<td>HAVING</td>
<td>对虚拟表VT6应用having过滤，只有符合的记录才会被 插入到虚拟表VT7中。</td>
</tr>
<tr>
<td>8</td>
<td>SELECT</td>
<td>执行select操作，选择指定的列，插入到虚拟表VT8中。</td>
</tr>
<tr>
<td>9</td>
<td>DISTINCT</td>
<td>对VT8中的记录进行去重。产生虚拟表VT9.</td>
</tr>
<tr>
<td>10</td>
<td>ORDER BY</td>
<td>将虚拟表VT9中的记录按照进行排序操作，产生虚拟表VT10.</td>
</tr>
<tr>
<td>11</td>
<td>LIMIT</td>
<td>取出指定行的记录，产生虚拟表VT11, 并将结果返回。</td>
</tr>
</tbody></table>

        
    </div>
    </div>

    <div class="article-badge">
        
        
    </div>

</div>

<footer class="article-footer">
    <div class="article-more-info">
    <div class="article-date">
  <time datetime="2021-04-25T05:30:34.000Z" itemprop="datePublished">2021-04-25</time>
</div>
    
        <div class="article-category">
        <a class="article-category-link" href="/categories/MySQL/">MySQL</a>
        </div>
    
    
        <div class="article-tag">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li></ul>
        </div>
    
    </div>
</footer>

</article>

    
  
    
      <article
id="post-算法/查找算法"
class="article article-type-post"
>



<div class="article-inner">
    

    <div class="article-body">
    <header class="article-title">
        <a href="/%E7%AE%97%E6%B3%95/%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/">查找算法</a>
    </header>
    <div class="article-entry post-inner-html">
        
        <p>[TOC]</p>
<h2 id="查找算法"><a href="#查找算法" class="headerlink" title="查找算法"></a>查找算法</h2><p><a href="/%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95">二分查找算法</a></p>

        
    </div>
    </div>

    <div class="article-badge">
        
        
    </div>

</div>

<footer class="article-footer">
    <div class="article-more-info">
    <div class="article-date">
  <time datetime="2021-04-25T05:21:14.000Z" itemprop="datePublished">2021-04-25</time>
</div>
    
        <div class="article-category">
        <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a>
        </div>
    
    
        <div class="article-tag">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>
        </div>
    
    </div>
</footer>

</article>

    
  
    
      <article
id="post-算法/排序算法"
class="article article-type-post"
>



<div class="article-inner">
    

    <div class="article-body">
    <header class="article-title">
        <a href="/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/">排序算法</a>
    </header>
    <div class="article-entry post-inner-html">
        
        <p>[TOC]</p>
<p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-b0ac02d897e5496c941041b9a46690eb.png"><br><img src="http://doc.cloudcollect.cc/upload/2021/04/image-fb7ab766f0784b8db00778c02070d031.png" alt="算法时间空间复杂度"></p>
<h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-f8c795f2767b4a2d8b7e215362577f53.png" alt="冒泡排序"></p>
<p>重复走访要排序的元素列，依次比较两个相邻的元素，如果顺序错误，将他们交换</p>
<ul>
<li>时间复杂度： <code>$O(n^2)$</code></li>
<li>空间复杂度： <code>0(1)</code></li>
</ul>
<h2 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h2><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-793ef8579653403e9c0349f63d87a571.png" alt="image.png"></p>
<p>第一次从待排序的数据元素中选出最小（或最大）的一个元素，存放在序列的起始位置，然后再从剩余未排序的元素中寻找到最小（或最大）的元素，然后放到已排序的序列的末尾，以此类推，知道全部待排序的数据元素个数为零。</p>
<h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-bbcd8db23c124539812ba43e52e8d5e8.png" alt="image.png"></p>
<p>通过构建有序序列，对于未排序数据，在已排序序列中从后向前扫描，找到相应位置并插入。</p>
<h2 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h2><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-00932ad4b5f74469b263640a1e0574cf.png" alt="image.png"></p>
<p>把记录按下标的一定增量分组，对每组使用插入排序算法排序；随着增量逐渐减少，每组包含的关键词越来越多，当增量减至1时，整个文件恰被分成一组，算法便终止。</p>
<h2 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h2><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-6bfc3e1f82524c91b8fe236af6e44fdf.png" alt="image.png"></p>
<p>将已有序的子序列合并，得到完全有序的序列，即先使每个子序列有序，再使子序列间有序</p>
<h5 id="算法步骤"><a href="#算法步骤" class="headerlink" title="算法步骤"></a>算法步骤</h5><ol>
<li>申请空间，空间大小为两个已经排序序列之和，该空间用来存放合并后的序列</li>
<li>设定两个指针，最初位置分别为两个已经排序序列的起始位置</li>
<li>比较两个指针所指向的元素，选择相对小的元素放入到合并空间，并移动指针到下一位置</li>
<li>重复步骤 3 直到某一指针达到序列尾</li>
<li>将另一序列剩下的所有元素直接复制到合并序列尾</li>
</ol>
<h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-950a69fa8a454f108e5d977a6ba0f3bb.png" alt="image.png"></p>
<h2 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h2><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-ad48322084e34682bf55e4ed11cc4553.png" alt="image.png"></p>
<p>利用数据结构<strong>堆</strong>所设计的一种排序算法。<br>堆积是一个<strong>近似完全二叉树</strong>的结构，并同时满足堆积的性质：即子节点的键值或索引总小于（或大于）它的父节点。</p>
<ul>
<li>时间复杂度： <strong>O(nlogn)</strong><h5 id="算法步骤-1"><a href="#算法步骤-1" class="headerlink" title="算法步骤"></a>算法步骤</h5></li>
</ul>
<ol>
<li>创建一个堆 H[0…n-1]</li>
<li>把堆首（最大值）和堆尾互换</li>
<li>把堆的尺寸缩小 1， 并调用 shift_down(0)，目的是把新的数组顶端数据调整到相应位置</li>
<li>重复步骤 2， 直到堆的尺寸为 1</li>
</ol>
<h2 id="计数排序"><a href="#计数排序" class="headerlink" title="计数排序"></a>计数排序</h2><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-a2cc3f9c53414fe9a7818bb8ded35606.png" alt="image.png"></p>
<p>一种<strong>非基于比较的排序</strong>算法</p>
<ul>
<li>时间复杂度： O(n+k)</li>
<li>空间复杂度： O(n+k)<blockquote>
<p>要求： 输入的数据必须是有<strong>确定的范围的整数</strong></p>
</blockquote>
</li>
</ul>
<h5 id="算法步骤-2"><a href="#算法步骤-2" class="headerlink" title="算法步骤"></a>算法步骤</h5><ol>
<li>花 O(n) 的时间扫描一下整个序列 A，获取最小值 min 和最大值 max</li>
<li>开辟新的空间创建新的数组 B，长度为 (max - min + 1)</li>
<li>数组 B 中 index 的元素记录的值是 A 中某元素出现的次数</li>
<li>最后输出目标整数序列，具体的逻辑是遍历数组 B，输出相应元素以及对应的个数</li>
</ol>
<h2 id="桶排序"><a href="#桶排序" class="headerlink" title="桶排序"></a>桶排序</h2><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-2a1cd220018c4b1babe13370845c9bd6.png" alt="image.png"></p>
<p>一种<strong>基于计数的排序</strong>算法（计数排序可参考上节的内容），</p>
<h5 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h5><p>将数据分到有限数量的桶子里，然后每个桶再分别排序（有可能再使用别的排序算法或是以递回方式继续使用桶排序进行排序）</p>
<h5 id="算法步骤-3"><a href="#算法步骤-3" class="headerlink" title="算法步骤"></a>算法步骤</h5><ol>
<li>设置固定数量的空桶。</li>
<li>把数据放到对应的桶中。</li>
<li>对每个不为空的桶中数据进行排序。</li>
<li>拼接不为空的桶中数据，得到结果</li>
</ol>
<h2 id="基数排序"><a href="#基数排序" class="headerlink" title="基数排序"></a>基数排序</h2><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-aace83e53e0e4c7baf8957e5c439425e.png" alt="image.png"></p>
<p>一种<strong>非比较型整数排序</strong>算法</p>
<h5 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h5><p>将整数按位数切割成不同的数字，然后按每个位数分别比较</p>
<h5 id="算法步骤-4"><a href="#算法步骤-4" class="headerlink" title="算法步骤"></a>算法步骤</h5><ol>
<li>将所有待比较数值（正整数）统一为同样的数位长度，数位较短的前补零</li>
<li>从最低位开始，依次进行依次排序</li>
<li>从最低位排序一直到最高位排序完成以后，数列就变成一个有序序列</li>
</ol>

        
    </div>
    </div>

    <div class="article-badge">
        
        
    </div>

</div>

<footer class="article-footer">
    <div class="article-more-info">
    <div class="article-date">
  <time datetime="2021-04-25T05:13:31.465Z" itemprop="datePublished">2021-04-25</time>
</div>
    
        <div class="article-category">
        <a class="article-category-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a>
        </div>
    
    
        <div class="article-tag">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li></ul>
        </div>
    
    </div>
</footer>

</article>

    
  
    
      <article
id="post-VS2015/Jenkins 打包 Virtual Studio 2015 C++工程"
class="article article-type-post"
>



<div class="article-inner">
    

    <div class="article-body">
    <header class="article-title">
        <a href="/VS2015/Jenkins%20%E6%89%93%E5%8C%85%20Virtual%20Studio%202015%20C++%E5%B7%A5%E7%A8%8B/">Jenkins 打包 Virtual Studio 2015 C++工程</a>
    </header>
    <div class="article-entry post-inner-html">
        
        <h2 id="Jenkins-打包-Virtual-Studio-2015-C-工程"><a href="#Jenkins-打包-Virtual-Studio-2015-C-工程" class="headerlink" title="Jenkins 打包 Virtual Studio 2015 C++工程"></a>Jenkins 打包 Virtual Studio 2015 C++工程</h2><h3 id="1-添加-MSBuild-插件"><a href="#1-添加-MSBuild-插件" class="headerlink" title="1. 添加 MSBuild 插件"></a>1. 添加 MSBuild 插件</h3><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-0102ae28d07c47b2ac0d1b38bdb67a74.png"><img src="images/6e11aa30db10fa815fbf51ac83a922865b9.jpg" alt="img"></p>
<h3 id="2-配置编译环境"><a href="#2-配置编译环境" class="headerlink" title="2. 配置编译环境"></a>2. 配置编译环境</h3><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-beee5105fc724aaa8a3cf4571c7e4aaa.png"><img src="images/f0a68d522dbaae7db8b7b40e79d5ba39ea1.jpg" alt="img"></p>
<h3 id="3-创建构建任务"><a href="#3-创建构建任务" class="headerlink" title="3. 创建构建任务"></a>3. 创建构建任务</h3><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-f90e431cf1bc41d3baa0292252deae57.png"><img src="images/ebbacdc44f76fdf0be4051aacf320a3c101.jpg" alt="img"></p>
<h3 id="4-选择构建选项"><a href="#4-选择构建选项" class="headerlink" title="4. 选择构建选项"></a>4. 选择构建选项</h3><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-895b182edb8e4700976e0b20c18e0b84.png"><img src="images/46e00263d441393710de464f7d80ead69c6.jpg" alt="img"></p>
<h3 id="5-配置-GIT-目录"><a href="#5-配置-GIT-目录" class="headerlink" title="5. 配置 GIT 目录"></a>5. 配置 GIT 目录</h3><p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-0ec7419c3d8149f497d84cc59c8b15e4.png"><img src="images/a7d2cb94159b26f82458e7670f2184c17ec.jpg" alt="img"></p>
<h3 id="6-配置构建参数"><a href="#6-配置构建参数" class="headerlink" title="6. 配置构建参数"></a>6. 配置构建参数</h3><p>参数：</p>
<p>/t:Rebuild /p:Configuration=Release /p:VisualStudioVersion=14.0 /p:TargetFrameworkVersion=v5.01</p>
<p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-bb12710ddf1443669f087295de1186e1.png"><img src="images/d7ee09220958667f3b1c1ea86fafc9ac536.jpg" alt="img"></p>
<h3 id="7-提取结果文件"><a href="#7-提取结果文件" class="headerlink" title="7. 提取结果文件"></a>7. 提取结果文件</h3><p>提取文件目录和类型： Release/<em>.exe,Release/</em>.dll</p>
<p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-f2228ba5973a4862bbbd4dcff2352bb4.png"><img src="images/87d5ae3e431cd6893d73147deda658df236.jpg" alt="img"></p>

        
    </div>
    </div>

    <div class="article-badge">
        
        
    </div>

</div>

<footer class="article-footer">
    <div class="article-more-info">
    <div class="article-date">
  <time datetime="2021-04-25T05:03:26.971Z" itemprop="datePublished">2021-04-25</time>
</div>
    
        <div class="article-category">
        <a class="article-category-link" href="/categories/VS2015/">VS2015</a>
        </div>
    
    
        <div class="article-tag">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Jenkins/" rel="tag">Jenkins</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VS2015/" rel="tag">VS2015</a></li></ul>
        </div>
    
    </div>
</footer>

</article>

    
  
    
      <article
id="post-VS2015/Win7 用 VS2015 编译 SqlCipher"
class="article article-type-post"
>



<div class="article-inner">
    

    <div class="article-body">
    <header class="article-title">
        <a href="/VS2015/Win7%20%E7%94%A8%20VS2015%20%E7%BC%96%E8%AF%91%20SqlCipher/">Win7 用 VS2015 编译 SqlCipher</a>
    </header>
    <div class="article-entry post-inner-html">
        
        <p>[TOC]</p>
<h2 id="Win7-用-VS2015-编译-SqlCipher"><a href="#Win7-用-VS2015-编译-SqlCipher" class="headerlink" title="Win7 用 VS2015 编译 SqlCipher"></a>Win7 用 VS2015 编译 SqlCipher</h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><ul>
<li><strong>Visual Studio 2015</strong></li>
<li><strong>ActiveState ActivePerl</strong>，编译 OpenSSL 使用</li>
<li><strong>MinGW</strong>，编译 SqlCipher 使用</li>
<li><strong>OpenSSL-1.0.2m</strong>，从官网下载</li>
<li><strong>SqlCipher，</strong>从 github 获取</li>
</ul>
<h3 id="安装-VS2015"><a href="#安装-VS2015" class="headerlink" title="安装 VS2015"></a>安装 VS2015</h3><p>  过程略。</p>
<h3 id="安装-ActivePerl"><a href="#安装-ActivePerl" class="headerlink" title="安装 ActivePerl"></a>安装 ActivePerl</h3><p>  过程略。</p>
<h3 id="安装-MinGW"><a href="#安装-MinGW" class="headerlink" title="安装 MinGW"></a>安装 MinGW</h3><p>网址: <a target="_blank" rel="noopener" href="http://sourceforge.net/projects/mingw/files/">http://sourceforge.net/projects/mingw/files/</a></p>
<p>下载 Download mingw-get-setup.exe</p>
<p>安装 MinGW 是一个多步骤的过程。首先下载并安装包管理器/安装程序，然后使用它来安装编译器和 msys 。</p>
<p>安装完安装程序后，运行它并在基本窗格下安装msys base，developer-tools，mingw32-base , gcc-g ++ 和 mingw32-tcl。</p>
<p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-43340e214dcf48c2b34503182a1b38a1.png"></p>
<p><img src="http://doc.cloudcollect.cc/upload/2021/04/image-328a2ccbc29141db8bf81e220ccf97ee.png"></p>
<h3 id="编译-OpenSSL（32位）"><a href="#编译-OpenSSL（32位）" class="headerlink" title="编译 OpenSSL（32位）"></a>编译 OpenSSL（32位）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin</span><br><span class="line">vcvars32.bat</span><br><span class="line">perl Configure VC-WIN32 no-asm --prefix=<span class="string">&quot;C:\openssl-1.0.2m\win32-release&quot;</span></span><br><span class="line">ms\do_nasm</span><br><span class="line">nmake -f ms\nt.mak</span><br><span class="line">nmake -f ms\nt.mak <span class="built_in">test</span></span><br><span class="line">nmake -f ms\nt.mak install</span><br><span class="line">nmake -f ms\ntdll.mak</span><br><span class="line">nmake -f ms\ntdll.mak <span class="built_in">test</span></span><br><span class="line">nmake -f ms\ntdll.mak install</span><br><span class="line">nmake -f ms\ntdll.mak clean</span><br></pre></td></tr></table></figure>

<p>目录 C:\openssl-1.0.2m\win32-release 下生成了两个库文件：</p>
<ul>
<li>动态库文件 libeay32.dll（位于./bin目录下）</li>
<li>静态库文件 libeay32.lib （位于./lib目录下）</li>
</ul>
<h3 id="编译-SqlCipher"><a href="#编译-SqlCipher" class="headerlink" title="编译 SqlCipher"></a>编译 SqlCipher</h3><ol>
<li><p>将上一步生成的两个库文件 libeay32.dll 、 libeay32.lib 复制到 C:\SqlCipher 目录下</p>
</li>
<li><p><strong>管理员权限</strong>运行 C:\mingw\msys\1.0\msys.bat 批处理文件，进入msys shell命令环境</p>
</li>
<li><p>利用命令切换到 SqlCipher 目录</p>
</li>
<li><p>```bash<br> cd /c/sqlcipher </p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    运行以下命令进行配置（注意这是一行），不能复制粘贴，只能手输入：</span><br><span class="line"></span><br><span class="line">5. ```bash</span><br><span class="line">    ./configure --with-crypto-lib=none --disable-tcl CFLAGS=&quot;-DSQLITE_HAS_CODEC -DSQLCIPHER_CRYPTO_OPENSSL -I/C/openssl-1.0.2m/win32-release/include /C/sqlcipher/libeay32.dll -L/C/sqlcipher/ -static-libgcc&quot; LDFLAGS=&quot;-leay32&quot;</span><br></pre></td></tr></table></figure>

<p> 执行命令</p>
</li>
<li><p>```bash<br> make clean<br> make sqlite3.cpp</p>
<h2 id="生成可执行文件sqlcipher-exe"><a href="#生成可执行文件sqlcipher-exe" class="headerlink" title="生成可执行文件sqlcipher.exe"></a>生成可执行文件sqlcipher.exe</h2><p> make</p>
<h2 id="生成库文件sqlite3-dll"><a href="#生成库文件sqlite3-dll" class="headerlink" title="生成库文件sqlite3.dll"></a>生成库文件sqlite3.dll</h2><p> make dll</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    生成 sqlite3.dll 和 sqlite3.def</span><br><span class="line"></span><br><span class="line">    - 打开 32 位 Visual Studio 命令提示符</span><br><span class="line">    - cd c:\sqlcipher</span><br><span class="line">    - lib /def:sqlite3.def</span><br><span class="line"></span><br><span class="line">### **测试 SqlCipher**（命令行）</span><br><span class="line"></span><br><span class="line">现在应该有一个功能齐全的 sqlcipher.exe 可执行文件和 dll 文件。</span><br><span class="line"></span><br><span class="line">打开一个正常的命令（cmd.exe）提示符，导航到sqlcipher构建目录：</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">sqlcipher.exe test.db</span><br><span class="line">sqlite&gt;PRAGMA key = &#x27;password&#x27;;</span><br><span class="line">sqlite&gt;create table testtable (id int, name varchar(20));</span><br><span class="line">sqlite&gt;insert into testtable (id,name) values (0,&#x27;alice&#x27;), (1,&#x27;bob&#x27;), (2,&#x27;charlie&#x27;);</span><br><span class="line">sqlite&gt;select * from testtable</span><br><span class="line">0:alice</span><br><span class="line">1:bob</span><br><span class="line">2:charlie</span><br><span class="line">sqlite&gt;.exit</span><br></pre></td></tr></table></figure></li>
</ol>
<p>现在我们有一个数据库，其中有一些值，让我们退出并尝试访问它没有密码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sqlcipher.exe test.db</span><br><span class="line">sqlite&gt;select * from testtable</span><br><span class="line">Error: file is encrypted or not a database</span><br><span class="line">sqlite&gt;.<span class="built_in">exit</span></span><br></pre></td></tr></table></figure>

<p>再次输入密码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sqlcipher.exe test.db</span><br><span class="line">sqlite&gt;PRAGMA key = <span class="string">&#x27;password&#x27;</span>;</span><br><span class="line">sqlite&gt;select * from testtable</span><br><span class="line">0:alice</span><br><span class="line">1:bob</span><br><span class="line">2:charlie</span><br><span class="line">sqlite&gt;.<span class="built_in">exit</span></span><br></pre></td></tr></table></figure>

<p>如果看起来工作正常，现在可以在十六进制编辑器中打开文件test.db，并验证它没有可辨别的结构。</p>
<p>如果您想要进行一些对比验证，请在没有PRAGMA密钥语句的情况下对新的数据库文件重复上述实验。它将使未加密的数据库，您将能够轻松地看到清晰的结构和原始数据。</p>
<h3 id="测试-SqlCipher（VS2015）"><a href="#测试-SqlCipher（VS2015）" class="headerlink" title="测试 SqlCipher（VS2015）"></a>测试 SqlCipher（VS2015）</h3><p>创建一个名为 SQLCipherTest 的 win32 控制台应用程序（关闭预编译头文件）</p>
<p>复制五个文件：sqlite3.exp，sqlite3.lib，sqlite3.def，sqlite3.dll和sqlite3.h到您的visual studio项目的源目录。</p>
<p>回到Visual Studio并在解决方案资源管理器中添加一个现有的头文件并选择sqlite3.h</p>
<p>打开项目属性 - &gt;配置属性 - &gt;连接器 - &gt;输入 - &gt;其他依赖项，并添加sqlite3.lib</p>
<p>在你的主源文件中输入如下的c程序：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;stdafx.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;sqlite3.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">callback</span><span class="params">(<span class="keyword">void</span> *NotUsed, <span class="keyword">int</span> argc, <span class="keyword">char</span> **argv, <span class="keyword">char</span> **azColName)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">int</span> i;</span><br><span class="line">   <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; argc; i++) &#123; <span class="comment">//loop over results</span></span><br><span class="line">       <span class="built_in">printf</span>(<span class="string">&quot;%s = %s\n&quot;</span>, azColName[i], argv[i] ? argv[i] : <span class="string">&quot;NULL&quot;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   sqlite3 *db;</span><br><span class="line">   <span class="keyword">if</span> (<span class="built_in">sqlite3_open</span>(<span class="string">&quot;name_and_path_for_db&quot;</span>, &amp;db) == SQLITE_OK) &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">&quot;DB file is open\n&quot;</span>);</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">sqlite3_exec</span>(db, (<span class="keyword">const</span> <span class="keyword">char</span>*)<span class="string">&quot;PRAGMA key =&#x27;password&#x27;&quot;</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>) == SQLITE_OK)&#123;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">&quot;Accepted Key\n&quot;</span>);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">sqlite3_exec</span>(db, (<span class="keyword">const</span> <span class="keyword">char</span>*)<span class="string">&quot;CREATE TABLE testtable (id int, name varchar(20));&quot;</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>) == SQLITE_OK) &#123;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">&quot;Created Table\n&quot;</span>);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">sqlite3_exec</span>(db, (<span class="keyword">const</span> <span class="keyword">char</span>*)<span class="string">&quot;INSERT INTO testtable (id,name) values (0,&#x27;alice&#x27;), (1,&#x27;bob&#x27;), (2,&#x27;charlie&#x27;);&quot;</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>, <span class="literal">NULL</span>) == SQLITE_OK) &#123;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">&quot;Gave it some data\n&quot;</span>);</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">sqlite3_exec</span>(db, (<span class="keyword">const</span> <span class="keyword">char</span>*)<span class="string">&quot;SELECT * FROM testtable;&quot;</span>, callback, <span class="literal">NULL</span>, <span class="literal">NULL</span>) == SQLITE_OK) &#123;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">&quot;Sent Select\n&quot;</span>);</span><br><span class="line">      &#125;;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">sqlite3_close</span>(db);</span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在调试器中运行它，你会看到select state的输出。</p>
<ul>
<li>注释掉 CREATE TABLE 和 INSERT INTO 两个 if 语句块并再次运行它，您应该再次看到 select 语句的输出。</li>
<li>将 password 改为不同的东西，你不应该看到 SELECT 的输出。</li>
</ul>

        
    </div>
    </div>

    <div class="article-badge">
        
        
    </div>

</div>

<footer class="article-footer">
    <div class="article-more-info">
    <div class="article-date">
  <time datetime="2021-04-25T04:59:09.399Z" itemprop="datePublished">2021-04-25</time>
</div>
    
        <div class="article-category">
        <a class="article-category-link" href="/categories/VS2015/">VS2015</a>
        </div>
    
    
        <div class="article-tag">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SQLite/" rel="tag">SQLite</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VS2015/" rel="tag">VS2015</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" rel="tag">环境搭建</a></li></ul>
        </div>
    
    </div>
</footer>

</article>

    
  
    
      <article
id="post-VS2015/Win7 用 VS2015 编译 openssl-1.0.2m"
class="article article-type-post"
>



<div class="article-inner">
    

    <div class="article-body">
    <header class="article-title">
        <a href="/VS2015/Win7%20%E7%94%A8%20VS2015%20%E7%BC%96%E8%AF%91%20openssl-1.0.2m/">Win7 用 VS2015 编译 openssl-1.0.2m</a>
    </header>
    <div class="article-entry post-inner-html">
        
        <p>[TOC]</p>
<h2 id="Win7-用-VS2015-编译-openssl-1-0-2m"><a href="#Win7-用-VS2015-编译-openssl-1-0-2m" class="headerlink" title="Win7 用 VS2015 编译 openssl-1.0.2m"></a>Win7 用 VS2015 编译 openssl-1.0.2m</h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>1）下载安装编译必须的ActivePerl： </p>
<p><a target="_blank" rel="noopener" href="http://www.activestate.com/activeperl/downloads">http://www.activestate.com/activeperl/downloads</a></p>
<p>安装完成后需要执行 ppm install dmake 安装 nmake</p>
<p>2）下载最新的openssl源码：</p>
<p><a target="_blank" rel="noopener" href="https://www.openssl.org/source/">https://www.openssl.org/source/</a></p>
<p>本文下载的是 openssl-1.0.2m 版本，然后解压至 C 盘根目录</p>
<h3 id="设置VC编译环境"><a href="#设置VC编译环境" class="headerlink" title="设置VC编译环境"></a>设置VC编译环境</h3><p>以下所有操作都是在【VS2015开发人员命令提示】中进行的，</p>
<p>具体位置一般是【开始-&gt;所有程序-&gt;Visual Studio 2015-&gt; Visual Studio Tools】下；</p>
<p>【编译 32 位 openssl 】</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin</span><br><span class="line">vcvars32.bat</span><br></pre></td></tr></table></figure>

<p>【编译 64 位 openssl 】</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin\amd64</span><br><span class="line">vcvars64.bat</span><br></pre></td></tr></table></figure>

<h3 id="配置编译文件和类型"><a href="#配置编译文件和类型" class="headerlink" title="配置编译文件和类型"></a>配置编译文件和类型</h3><p>如果只是想编译 OpenSSL，请看下面：</p>
<p>1）先进入 openssl-1.0.2m 目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\openssl-1.0.2m</span><br></pre></td></tr></table></figure>

<p>2）配置输出目录和编译类型【编译32位、64位；release、debug有区别】</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">perl Configure [编译类型] no-asm --prefix=<span class="string">&quot;[输出目录]&quot;</span></span><br></pre></td></tr></table></figure>

<p>– [编译类型]可以选择以下：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>debug-VC-WIN32</td>
<td>编译32位debug版本</td>
</tr>
<tr>
<td>debug-VC-WIN64A</td>
<td>编译64位debug版本</td>
</tr>
<tr>
<td>VC-WIN32</td>
<td>编译32位release版本</td>
</tr>
<tr>
<td>VC-WIN64A</td>
<td>编译64位release版本</td>
</tr>
</tbody></table>
<p>– [输出目录]理论任何地方都可以</p>
<p>3）配置模式：</p>
<p>- 【编译32位openssl】,一般都使用 no-asm 模式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ms\do_nasm</span><br></pre></td></tr></table></figure>

<p>- 如果之前编译使用了no-asm参数，否则会在编译引用了该openssl库的工程中出现”error LNK2001和error LNK2019 无法解析的外部符号”这个错误。</p>
<p>- 【编译64位openssl】</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ms\do_win64a.bat</span><br></pre></td></tr></table></figure>

<p>- 执行这一步之后，在ms目录下会生成 nt.mak 和 ntdll.mak 两个编译配置文件</p>
<p>- nt.mak 用于生成静态lib库</p>
<p>- ntdll.mak 用于生成动态dll库</p>
<p>注意： 如果不是想单独拿编译好的库出来用，而是需要交叉编译，比如接着编译libcurl，则可以使用如下命令全部一次性编译32位所有版本的库：<code>ms\32all.bat no-asm</code>如果想要交叉编译libcurl，还是用 libcurl\project\build-openssl.bat 更好，但不保证可以成功。</p>
<h3 id="编译【静态库、动态库有区别】"><a href="#编译【静态库、动态库有区别】" class="headerlink" title="编译【静态库、动态库有区别】"></a>编译【静态库、动态库有区别】</h3><p>- 【编译openssl静态链接库】</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nmake -f ms\nt.mak</span><br><span class="line">nmake -f ms\nt.mak <span class="built_in">test</span></span><br><span class="line">nmake -f ms\nt.mak install</span><br></pre></td></tr></table></figure>

<p>- 【编译openssl动态链接库】</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nmake -f ms\ntdll.mak</span><br><span class="line">nmake -f ms\ntdll.mak <span class="built_in">test</span></span><br><span class="line">nmake -f ms\ntdll.mak install</span><br></pre></td></tr></table></figure>

<p>- 执行test命令可以测试编译好的库，测试成功了就可以运行install命令，运行完之后才会在输出目录中找到输出的编译好的库和加入工程时必要的include文件。</p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>1）设置编译类型的时候<strong>千万别忘记 no-asm 参数</strong>，关闭汇编模式，否则会出现类似如下错误：</p>
<p>Assembling: tmp32\sha1-586.asm</p>
<p>tmp32\sha1-586.asm(1427) : error A2070: invalid instruction operands</p>
<p>tmp32\sha1-586.asm(1571) : error A2070: invalid instruction operands</p>
<p>NMAKE : fatal error U1077: ‘ml’ : return code ‘0x1’</p>
<p>Stop.</p>
<p>2）设置VC编译环境的时候，注意有32位和64位的区别。</p>
<p>-————————————————————————————————————</p>
<h3 id="编译实例"><a href="#编译实例" class="headerlink" title="编译实例"></a>编译实例</h3><p>openssl目录：c:\openssl-1.0.2m\</p>
<p>编译 32 位 Release 版本的 lib 的例子:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin</span><br><span class="line">vcvars32.bat</span><br><span class="line"></span><br><span class="line">perl Configure VC-WIN32 no-asm --prefix=<span class="string">&quot;C:\openssl-1.0.2m\win32-release-lib&quot;</span></span><br><span class="line">ms\do_nasm</span><br><span class="line">nmake -f ms\nt.mak</span><br><span class="line">nmake -f ms\nt.mak <span class="built_in">test</span></span><br><span class="line">nmake -f ms\nt.mak install</span><br></pre></td></tr></table></figure>

<p>编译 64 位 Release 版本的 dll 的例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\bin</span><br><span class="line">vcvars32.bat</span><br><span class="line"></span><br><span class="line">perl Configure VC-WIN64A no-asm --prefix=<span class="string">&quot;c:\openssl-1.0.2m\win64-release-dll&quot;</span></span><br><span class="line">ms\do_win64a.bat</span><br><span class="line">nmake -f ms\ntdll.mak</span><br><span class="line">nmake -f ms\ntdll.mak <span class="built_in">test</span></span><br><span class="line">nmake -f ms\ntdll.mak install</span><br><span class="line">nmake -f ms\ntdll.mak clean</span><br></pre></td></tr></table></figure>

<p>至此，就可以将 c:\openssl-1.0.2m\win32-release-lib 目录复制到需要使用的地方就可以使用了。</p>

        
    </div>
    </div>

    <div class="article-badge">
        
        
    </div>

</div>

<footer class="article-footer">
    <div class="article-more-info">
    <div class="article-date">
  <time datetime="2021-04-25T04:58:17.177Z" itemprop="datePublished">2021-04-25</time>
</div>
    
        <div class="article-category">
        <a class="article-category-link" href="/categories/VS2015/">VS2015</a>
        </div>
    
    
        <div class="article-tag">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VS2015/" rel="tag">VS2015</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/openssl/" rel="tag">openssl</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" rel="tag">环境搭建</a></li></ul>
        </div>
    
    </div>
</footer>

</article>

    
  
    
      <article
id="post-CentOS/Linux 配置 NTP 时钟同步"
class="article article-type-post"
>



<div class="article-inner">
    

    <div class="article-body">
    <header class="article-title">
        <a href="/CentOS/Linux%20%E9%85%8D%E7%BD%AE%20NTP%20%E6%97%B6%E9%92%9F%E5%90%8C%E6%AD%A5/">Linux 配置 NTP 时钟同步</a>
    </header>
    <div class="article-entry post-inner-html">
        
        <h1 id="Linux-配置-NTP-时钟同步"><a href="#Linux-配置-NTP-时钟同步" class="headerlink" title="Linux 配置 NTP 时钟同步"></a>Linux 配置 NTP 时钟同步</h1><h2 id="一、-安装NTP"><a href="#一、-安装NTP" class="headerlink" title="一、 安装NTP"></a>一、 安装NTP</h2><ol>
<li><p>下载 tar 包： ntp-ntp-4.2.8.tar.gz</p>
</li>
<li><p>上传 tar 包到需要安装时钟同步的服务端及客户端机器上</p>
</li>
<li><p>进入上传文件目录解压文件</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf ntp-ntp-4.2.8.tar.gz</span><br></pre></td></tr></table></figure></li>
<li><p>进入解压后的文件目录：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ntp-ntp-4.2.8</span><br></pre></td></tr></table></figure></li>
<li><p>编译安装包</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/ntp &amp;&amp; make</span><br></pre></td></tr></table></figure></li>
<li><p>安装</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make install</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="二、-服务端配置"><a href="#二、-服务端配置" class="headerlink" title="二、 服务端配置"></a>二、 服务端配置</h2><h3 id="1-修改配置文件"><a href="#1-修改配置文件" class="headerlink" title="1. 修改配置文件"></a>1. 修改配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">命令： vi /etc/ntp.conf</span><br></pre></td></tr></table></figure>

<p>【写入以下内容】</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 权限设置</span></span><br><span class="line">restrict default nomodify</span><br><span class="line"></span><br><span class="line"><span class="comment">## 开放本机的访问</span></span><br><span class="line">restrict 127.0.0.1</span><br><span class="line"></span><br><span class="line">driftfile /etc/ntp/drift</span><br><span class="line">logfile /var/<span class="built_in">log</span>/ntp.log</span><br><span class="line"></span><br><span class="line"><span class="comment">## 设置上级同步服务器</span></span><br><span class="line">server 127.127.1.1</span><br><span class="line">fudge 127.127.1.1 stratum 5</span><br></pre></td></tr></table></figure>

<h3 id="2-启动ntp服务"><a href="#2-启动ntp服务" class="headerlink" title="2. 启动ntp服务"></a>2. 启动ntp服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/ntp/bin/ntpd start</span><br></pre></td></tr></table></figure>

<h2 id="三、-客户端配置"><a href="#三、-客户端配置" class="headerlink" title="三、 客户端配置"></a>三、 客户端配置</h2><ol>
<li><p>安装NTP，步骤与服务端相同</p>
</li>
<li><p>修改配置文件</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ntp.conf</span><br></pre></td></tr></table></figure>

 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server 【NTP服务端IP】</span><br></pre></td></tr></table></figure></li>
<li><p>手动同步时间</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/ntp/bin/ntpdate 【NTP服务端IP】</span><br></pre></td></tr></table></figure></li>
<li><p>自动同步时间 </p>
</li>
<li><p>```bash<br> crontab –e</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">``` bash</span><br><span class="line">*/5 * * * * /usr/local/ntp/bin/ntpdate 【NTP服务端IP】</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="四、可能出现的问题"><a href="#四、可能出现的问题" class="headerlink" title="四、可能出现的问题"></a>四、可能出现的问题</h2><ol>
<li>客户端手动同步时，报错：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">no server suitable <span class="keyword">for</span> synchronization found</span><br></pre></td></tr></table></figure>

<p>出现此问题有三种情况：</p>
<ul>
<li>   服务端启动后需要等5分钟左右，才能进行同步</li>
<li>   服务端启动失败，可以使用 <code>watch /usr/local/ntp/bin/ntpq –p</code> 命令查看服务端运行情况</li>
<li>   防火墙拦截，关闭防火墙， <code>service iptables stop</code></li>
</ul>
<ol start="2">
<li>服务端使用 <code>/usr/local/ntp/bin/ntpq –p</code> 命令查询时间同步信息时，提示：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">no association ID`s returned</span><br></pre></td></tr></table></figure>

<p>需要检查服务端配置文件是否正确</p>

        
    </div>
    </div>

    <div class="article-badge">
        
        
    </div>

</div>

<footer class="article-footer">
    <div class="article-more-info">
    <div class="article-date">
  <time datetime="2021-04-25T04:57:27.444Z" itemprop="datePublished">2021-04-25</time>
</div>
    
        <div class="article-category">
        <a class="article-category-link" href="/categories/Linux/">Linux</a>
        </div>
    
    
        <div class="article-tag">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NTP/" rel="tag">NTP</a></li></ul>
        </div>
    
    </div>
</footer>

</article>

    
  
    
      <article
id="post-CentOS/CentOS8 使用 yum 安装 MySQL8"
class="article article-type-post"
>



<div class="article-inner">
    

    <div class="article-body">
    <header class="article-title">
        <a href="/CentOS/CentOS8%20%E4%BD%BF%E7%94%A8%20yum%20%E5%AE%89%E8%A3%85%20MySQL8/">CentOS8 使用 yum 安装 MySQL8</a>
    </header>
    <div class="article-entry post-inner-html">
        
        <p>[TOC]</p>
<h1 id="CentOS8-使用-yum-安装-MySQL8"><a href="#CentOS8-使用-yum-安装-MySQL8" class="headerlink" title="CentOS8 使用 yum 安装 MySQL8"></a>CentOS8 使用 yum 安装 MySQL8</h1><ul>
<li><p>CentOS Linux release 8.1.1911 (Core)</p>
</li>
<li><p>mysql80-community-release-el8-1.noarch.rpm</p>
</li>
</ul>
<h2 id="卸载之前的安装"><a href="#卸载之前的安装" class="headerlink" title="卸载之前的安装"></a>卸载之前的安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># rpm -qa | grep -i mysql</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 强力删除，对相关依赖的文件也进行强力删除</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -e --nodeps 软件名</span></span><br></pre></td></tr></table></figure>

<h2 id="安装服务端（mysql-server）"><a href="#安装服务端（mysql-server）" class="headerlink" title="安装服务端（mysql-server）"></a>安装服务端（mysql-server）</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># wget https://repo.mysql.com//mysql80-community-release-el8-1.noarch.rpm</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># rpm -ivh mysql80-community-release-el8-1.noarch.rpm</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum install mysql-server</span></span><br></pre></td></tr></table></figure>

<h2 id="查看是否安装成功"><a href="#查看是否安装成功" class="headerlink" title="查看是否安装成功"></a>查看是否安装成功</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ps -ef | grep mysql</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># cat /etc/group | grep mysql</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># cat /etc/password | grep mysql</span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># mysqladmin --version</span></span><br></pre></td></tr></table></figure>

<h2 id="设置开机启动"><a href="#设置开机启动" class="headerlink" title="设置开机启动"></a>设置开机启动</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># systemctl list-unit-files|grep mysqld</span></span><br><span class="line">mysqld.service disabled</span><br><span class="line">mysqld@.service disabled</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置开机启动</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl enable mysqld.service</span></span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/mysqld.service → /usr/lib/systemd/system/mysqld.service.</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl list-unit-files|grep mysqld</span></span><br><span class="line">mysqld.service enabled</span><br><span class="line">mysqld@.service disabled</span><br></pre></td></tr></table></figure>

<h2 id="启动服务"><a href="#启动服务" class="headerlink" title="启动服务"></a>启动服务</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看是否启动MySQL服务</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ps -ef|grep mysql</span></span><br><span class="line">root 4311 32702 0 21:07 pts/4 00:00:00 grep --color=auto mysql</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动服务</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl start mysqld.service </span></span><br></pre></td></tr></table></figure>

<h2 id="停止、重启服务"><a href="#停止、重启服务" class="headerlink" title="停止、重启服务"></a>停止、重启服务</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 停止服务</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl stop mysqld</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 重启服务</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl restart mysqld</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看服务</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl status mysqld</span></span><br></pre></td></tr></table></figure>



<h2 id="安全设置"><a href="#安全设置" class="headerlink" title="安全设置"></a>安全设置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# mysql_secure_installation</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="重置密码"><a href="#重置密码" class="headerlink" title="重置密码"></a>重置密码</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 选择 mysql 数据库</span></span><br><span class="line">mysql&gt; use mysql;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清空旧密码</span></span><br><span class="line">mysql&gt; update user <span class="built_in">set</span> authentication_string=<span class="string">&#x27;&#x27;</span> <span class="built_in">where</span> user=<span class="string">&#x27;root&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重置新密码</span></span><br><span class="line">mysql&gt; alter user <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified by <span class="string">&#x27;11111111&#x27;</span>;</span><br></pre></td></tr></table></figure>



<h2 id="赋权远程客户端"><a href="#赋权远程客户端" class="headerlink" title="赋权远程客户端"></a>赋权远程客户端</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建账户</span></span><br><span class="line">mysql&gt; create user <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified by <span class="string">&#x27;11111111&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 赋予权限</span></span><br><span class="line"><span class="comment"># with grant option 选项表示该用户可以将自己拥有的权限授权给别人</span></span><br><span class="line">mysql&gt; grant all privileges on *.* to <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> with grant option;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 赋权生效，将当前 user 和 privilige 表中的用户信息/权限设置提取到内存</span></span><br><span class="line">mysql&gt; flush privileges;</span><br></pre></td></tr></table></figure>


        
    </div>
    </div>

    <div class="article-badge">
        
        
    </div>

</div>

<footer class="article-footer">
    <div class="article-more-info">
    <div class="article-date">
  <time datetime="2021-04-25T04:56:25.477Z" itemprop="datePublished">2021-04-25</time>
</div>
    
        <div class="article-category">
        <a class="article-category-link" href="/categories/CentOS/">CentOS</a>
        </div>
    
    
        <div class="article-tag">
        <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOS/" rel="tag">CentOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" rel="tag">环境搭建</a></li></ul>
        </div>
    
    </div>
</footer>

</article>

    
  

  
    <nav class="pagination">
        <a class="extend prev" rel="prev" href="/page/3/">Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/5/">Next</a>
    </nav>
  
</div>

                </section>
            </section>

            
            <aside class="sidebar ">
                


<div class="widget" id="widget">
    
      
    
      
  <div class="widget-wrap widget-tags">
    <div class="widget-title"><span>Tags</span></div>
    <div class="widget-inner">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOS/" rel="tag">CentOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Electron/" rel="tag">Electron</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HAProxy/" rel="tag">HAProxy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jenkins/" rel="tag">Jenkins</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/" rel="tag">Maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NTP/" rel="tag">NTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/" rel="tag">Oracle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQLite/" rel="tag">SQLite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STL/" rel="tag">STL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TCP-IP/" rel="tag">TCP/IP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Typora/" rel="tag">Typora</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VS2015/" rel="tag">VS2015</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VUE/" rel="tag">VUE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vditor/" rel="tag">Vditor</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/openssl/" rel="tag">openssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">多线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" rel="tag">开发工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" rel="tag">异常处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%89%B9%E5%A4%84%E7%90%86/" rel="tag">批处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/" rel="tag">环境搭建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" rel="tag">计算机组成原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%80%9F%E6%9F%A5/" rel="tag">速查</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%AB%98%E5%8F%AF%E7%94%A8/" rel="tag">高可用</a></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap widget-cate">
    <div class="widget-title"><span>Categories</span></div>
    <div class="widget-inner">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CentOS/">CentOS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Electron/">Electron</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/GIt/">GIt</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Maven/">Maven</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nodejs/">Nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Oracle/">Oracle</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringBoot/">SpringBoot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/VS2015/">VS2015</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/VUE/">VUE</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%BB%98%E8%AE%A4%E5%88%86%E7%B1%BB/">默认分类</a></li></ul>
    </div>
  </div>


    
</div>

<div id="backtop"><i class="icon icon-arrow-up"></i></div>
            </aside>
            
        </div>
    </div>

    <!-- <footer class="footer">
    <div class="footer-wave">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#3c4859" fill-opacity="1" d="M0,160L60,181.3C120,203,240,245,360,240C480,235,600,181,720,186.7C840,192,960,256,1080,261.3C1200,267,1320,213,1380,186.7L1440,160L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>
    </div>

    <div class="footer-wrap">
        <div class="footer-inner"> 
            天空 &copy; 2021<br>
            Powered By Hexo · Theme By <a href="https://github.com/lh1me/hexo-theme-aomori" target="_blank">Aomori</a>
        </div>
    </div>

</footer> -->

<!-- 

 -->


<script src="/dist/build.js?1623049492098.js"></script>


<script src="/dist/custom.js?1623049492098.js"></script>









</body>

</html>